{"ast":null,"code":"var _jsxFileName = \"C:\\\\Online Exam Proctoring System\\\\frontend\\\\src\\\\components\\\\PreExamSetup.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./PreExamSetup.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PreExamSetup({\n  user,\n  examId,\n  examDetails,\n  onProceed,\n  onCancel\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [registeredDescriptor, setRegisteredDescriptor] = useState(null);\n  const [checks, setChecks] = useState({\n    camera: {\n      status: 'pending',\n      message: 'Checking camera access...'\n    },\n    models: {\n      status: 'pending',\n      message: 'Loading face detection models...'\n    },\n    faceDetection: {\n      status: 'pending',\n      message: 'Waiting for face detection...'\n    },\n    lighting: {\n      status: 'pending',\n      message: 'Checking lighting conditions...'\n    },\n    identity: {\n      status: 'pending',\n      message: 'Verifying your identity...'\n    },\n    singlePerson: {\n      status: 'pending',\n      message: 'Checking for single person...'\n    }\n  });\n  const [canProceed, setCanProceed] = useState(false);\n  const [verificationHistory, setVerificationHistory] = useState([]); // Track last few results\n  const [currentIssues, setCurrentIssues] = useState([]);\n  const detectionInterval = useRef(null);\n  useEffect(() => {\n    startSystemCheck();\n    return () => {\n      stopCamera();\n      if (detectionInterval.current) clearInterval(detectionInterval.current);\n    };\n  }, []);\n  const stopCamera = () => {\n    var _videoRef$current;\n    if ((_videoRef$current = videoRef.current) !== null && _videoRef$current !== void 0 && _videoRef$current.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n    }\n  };\n  const startSystemCheck = async () => {\n    await checkCamera();\n    await loadModels();\n    await loadRegisteredFace();\n    startContinuousChecks();\n  };\n  const checkCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: 640,\n          height: 480,\n          facingMode: \"user\"\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        await new Promise(resolve => {\n          videoRef.current.onloadedmetadata = () => {\n            videoRef.current.play();\n            resolve();\n          };\n        });\n        updateCheck(\"camera\", \"success\", \"‚úì Camera connected\");\n      }\n    } catch (error) {\n      updateCheck(\"camera\", \"error\", \"‚úó Camera access denied\");\n    }\n  };\n  const loadModels = async () => {\n    try {\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\n      await Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL)]);\n      updateCheck(\"models\", \"success\", \"‚úì Detection models loaded\");\n    } catch (error) {\n      updateCheck(\"models\", \"error\", \"‚úó Failed to load detection models\");\n    }\n  };\n  const loadRegisteredFace = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await fetch(\"http://localhost:4000/api/auth/face-descriptor\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error(\"Face not registered\");\n      const data = await res.json();\n      if (data.faceDescriptor && data.faceDescriptor.length === 128) {\n        setRegisteredDescriptor(new Float32Array(data.faceDescriptor));\n        console.log(\"‚úÖ Registered face loaded\");\n      } else {\n        alert(\"Invalid face descriptor. Please register your face first.\");\n      }\n    } catch (err) {\n      console.error(\"Failed to load registered face:\", err);\n      alert(\"‚ùå Could not load registered face. Please register first.\");\n    }\n  };\n  const startContinuousChecks = () => {\n    detectionInterval.current = setInterval(async () => {\n      await performAllChecks();\n    }, 1000);\n  };\n  const performAllChecks = async () => {\n    if (!videoRef.current || videoRef.current.readyState !== 4) {\n      updateCheck(\"camera\", \"pending\", \"‚è≥ Waiting for camera...\");\n      return;\n    }\n    if (!registeredDescriptor) {\n      updateCheck(\"identity\", \"pending\", \"‚è≥ Loading registered face...\");\n      return;\n    }\n    try {\n      // Detect faces\n      const detections = await faceapi.detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions({\n        inputSize: 224\n      })).withFaceLandmarks().withFaceDescriptors();\n      console.log(\"Detections:\", detections);\n      const issues = [];\n\n      // --- Face Detection ---\n      if (detections.length === 0) {\n        updateCheck(\"faceDetection\", \"warning\", \"‚ö† No face detected\");\n        updateCheck(\"identity\", \"pending\", \"‚è≥ Waiting for face...\");\n        updateCheck(\"singlePerson\", \"pending\", \"‚è≥ Waiting for face...\");\n        issues.push(\"Position your face in front of the camera\");\n      } else {\n        updateCheck(\"faceDetection\", \"success\", \"‚úì Face detected\");\n      }\n\n      // --- Single Person Check ---\n      if (detections.length > 1) {\n        updateCheck(\"singlePerson\", \"error\", `‚úó ${detections.length} people detected`);\n        issues.push(\"Multiple people detected. Only you should be visible.\");\n      } else if (detections.length === 1) {\n        updateCheck(\"singlePerson\", \"success\", \"‚úì Single person confirmed\");\n      }\n\n      // --- Lighting Check ---\n      if (detections.length === 1) {\n        const lightingScore = detections[0].detection.score;\n        if (lightingScore < 0.3) {\n          updateCheck(\"lighting\", \"warning\", \"‚ö† Poor lighting - improve lighting\");\n          issues.push(\"Lighting is poor. Please improve lighting conditions.\");\n        } else if (lightingScore < 0.6) {\n          updateCheck(\"lighting\", \"warning\", \"‚ö† Lighting could be better\");\n          issues.push(\"Lighting could be improved for better detection.\");\n        } else {\n          updateCheck(\"lighting\", \"success\", \"‚úì Lighting is good\");\n        }\n      }\n\n      // --- Identity Check ---\n      if (detections.length === 1) {\n        const distance = faceapi.euclideanDistance(registeredDescriptor, detections[0].descriptor);\n        const threshold = 0.6;\n        const isMatch = distance < threshold;\n        const confidence = Math.max(0, (1 - distance) * 100);\n        if (isMatch) {\n          updateCheck(\"identity\", \"success\", `‚úì Identity verified (${confidence.toFixed(1)}% match)`);\n        } else {\n          updateCheck(\"identity\", \"error\", `‚úó Identity mismatch (${confidence.toFixed(1)}% match)`);\n          issues.push(\"Face doesn't match registered face.\");\n        }\n      }\n      setCurrentIssues(issues);\n\n      // --- Can Proceed ---\n      // Allow proceeding if face detected, single person, and identity verified (or no issues)\n      const canProceedNow = detections.length === 1 && issues.length === 0;\n      setCanProceed(canProceedNow);\n\n      // --- Draw Canvas ---\n      if (canvasRef.current && detections.length > 0) {\n        const dims = faceapi.matchDimensions(canvasRef.current, videoRef.current, true);\n        const resizedDetections = faceapi.resizeResults(detections, dims);\n        const ctx = canvasRef.current.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n        faceapi.draw.drawDetections(canvasRef.current, resizedDetections);\n        faceapi.draw.drawFaceLandmarks(canvasRef.current, resizedDetections);\n      }\n    } catch (error) {\n      console.error(\"Error in performAllChecks:\", error);\n      updateCheck(\"faceDetection\", \"error\", \"‚úó Detection error. Check console.\");\n      updateCheck(\"identity\", \"error\", \"‚úó Detection error.\");\n      setCanProceed(false);\n    }\n  };\n\n  // --- Sliding window helper ---\n  const pushVerificationHistory = (result, issues) => {\n    setVerificationHistory(prev => {\n      const newHistory = [...prev.slice(-2), result]; // keep last 2 + new = 3\n      const windowCheck = newHistory;\n      if (windowCheck.length === 3 && windowCheck.every(v => v) && issues.length === 0) {\n        setCanProceed(true);\n        console.log(\"‚úÖ All checks passed! Can proceed.\");\n      } else {\n        setCanProceed(false);\n      }\n      console.log(\"Verification sliding window:\", windowCheck);\n      return newHistory;\n    });\n  };\n\n  // till here perform all checks\n  const updateCheck = (checkName, status, message) => {\n    setChecks(prev => ({\n      ...prev,\n      [checkName]: {\n        status,\n        message\n      }\n    }));\n  };\n  const handleProceed = () => {\n    if (canProceed) {\n      stopCamera();\n      onProceed();\n    }\n  };\n  const handleCancel = () => {\n    stopCamera();\n    onCancel();\n  };\n  const getStatusIcon = status => {\n    switch (status) {\n      case \"success\":\n        return \"‚úì\";\n      case \"error\":\n        return \"‚úó\";\n      case \"warning\":\n        return \"‚ö†\";\n      case \"pending\":\n        return \"‚è≥\";\n      default:\n        return \"‚óã\";\n    }\n  };\n  const getStatusClass = status => `check-item status-${status}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pre-exam-setup\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"setup-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"setup-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDCF8 Pre-Exam System Check\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please ensure all checks pass before starting the exam\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"setup-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"camera-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"camera-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              autoPlay: true,\n              muted: true,\n              className: \"preview-video\",\n              onLoadedMetadata: () => {\n                if (canvasRef.current && videoRef.current) {\n                  canvasRef.current.width = videoRef.current.videoWidth;\n                  canvasRef.current.height = videoRef.current.videoHeight;\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"preview-canvas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), currentIssues.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-issues\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"\\u26A0\\uFE0F Current Issues:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: currentIssues.map((issue, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: issue\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checks-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"System Checks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checks-list\",\n            children: Object.entries(checks).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: getStatusClass(value.status),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"check-icon\",\n                children: getStatusIcon(value.status)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"check-message\",\n                children: value.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this)]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"setup-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCancel,\n          className: \"btn-cancel\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleProceed,\n          disabled: !canProceed,\n          className: \"btn-proceed\",\n          children: canProceed ? \"‚úì Start Exam\" : \"‚è≥ Waiting for all checks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n}\n_s(PreExamSetup, \"ETAAoMXOe0bzD/ei6v6kgE725xg=\");\n_c = PreExamSetup;\nvar _c;\n$RefreshReg$(_c, \"PreExamSetup\");","map":{"version":3,"names":["React","useEffect","useRef","useState","faceapi","useNavigate","jsxDEV","_jsxDEV","PreExamSetup","user","examId","examDetails","onProceed","onCancel","_s","videoRef","canvasRef","registeredDescriptor","setRegisteredDescriptor","checks","setChecks","camera","status","message","models","faceDetection","lighting","identity","singlePerson","canProceed","setCanProceed","verificationHistory","setVerificationHistory","currentIssues","setCurrentIssues","detectionInterval","startSystemCheck","stopCamera","current","clearInterval","_videoRef$current","srcObject","getTracks","forEach","track","stop","checkCamera","loadModels","loadRegisteredFace","startContinuousChecks","stream","navigator","mediaDevices","getUserMedia","video","width","height","facingMode","Promise","resolve","onloadedmetadata","play","updateCheck","error","MODEL_URL","process","env","PUBLIC_URL","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","token","localStorage","getItem","res","fetch","headers","Authorization","ok","Error","data","json","faceDescriptor","length","Float32Array","console","log","alert","err","setInterval","performAllChecks","readyState","detections","detectAllFaces","TinyFaceDetectorOptions","inputSize","withFaceLandmarks","withFaceDescriptors","issues","push","lightingScore","detection","score","distance","euclideanDistance","descriptor","threshold","isMatch","confidence","Math","max","toFixed","canProceedNow","dims","matchDimensions","resizedDetections","resizeResults","ctx","getContext","clearRect","draw","drawDetections","drawFaceLandmarks","pushVerificationHistory","result","prev","newHistory","slice","windowCheck","every","v","checkName","handleProceed","handleCancel","getStatusIcon","getStatusClass","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","muted","onLoadedMetadata","videoWidth","videoHeight","map","issue","index","Object","entries","key","value","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/PreExamSetup.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as faceapi from \"face-api.js\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./PreExamSetup.css\";\r\n\r\nexport default function PreExamSetup({ user, examId, examDetails, onProceed, onCancel }) {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [registeredDescriptor, setRegisteredDescriptor] = useState(null);\r\n\r\n  const [checks, setChecks] = useState({\r\n    camera: { status: 'pending', message: 'Checking camera access...' },\r\n    models: { status: 'pending', message: 'Loading face detection models...' },\r\n    faceDetection: { status: 'pending', message: 'Waiting for face detection...' },\r\n    lighting: { status: 'pending', message: 'Checking lighting conditions...' },\r\n    identity: { status: 'pending', message: 'Verifying your identity...' },\r\n    singlePerson: { status: 'pending', message: 'Checking for single person...' }\r\n  });\r\n\r\n  const [canProceed, setCanProceed] = useState(false);\r\nconst [verificationHistory, setVerificationHistory] = useState([]); // Track last few results\r\n  const [currentIssues, setCurrentIssues] = useState([]);\r\n  const detectionInterval = useRef(null);\r\n\r\n  useEffect(() => {\r\n    startSystemCheck();\r\n    return () => {\r\n      stopCamera();\r\n      if (detectionInterval.current) clearInterval(detectionInterval.current);\r\n    };\r\n  }, []);\r\n\r\n  const stopCamera = () => {\r\n    if (videoRef.current?.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n    }\r\n  };\r\n\r\n  const startSystemCheck = async () => {\r\n    await checkCamera();\r\n    await loadModels();\r\n    await loadRegisteredFace();\r\n    startContinuousChecks();\r\n  };\r\n\r\n  const checkCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: { width: 640, height: 480, facingMode: \"user\" }\r\n      });\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        await new Promise(resolve => {\r\n          videoRef.current.onloadedmetadata = () => {\r\n            videoRef.current.play();\r\n            resolve();\r\n          };\r\n        });\r\n        updateCheck(\"camera\", \"success\", \"‚úì Camera connected\");\r\n      }\r\n    } catch (error) {\r\n      updateCheck(\"camera\", \"error\", \"‚úó Camera access denied\");\r\n    }\r\n  };\r\n\r\n  const loadModels = async () => {\r\n    try {\r\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\r\n      await Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL),\r\n      ]);\r\n      updateCheck(\"models\", \"success\", \"‚úì Detection models loaded\");\r\n    } catch (error) {\r\n      updateCheck(\"models\", \"error\", \"‚úó Failed to load detection models\");\r\n    }\r\n  };\r\n\r\n  const loadRegisteredFace = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const res = await fetch(\"http://localhost:4000/api/auth/face-descriptor\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    if (!res.ok) throw new Error(\"Face not registered\");\r\n\r\n    const data = await res.json();\r\n\r\n    if (data.faceDescriptor && data.faceDescriptor.length === 128) {\r\n      setRegisteredDescriptor(new Float32Array(data.faceDescriptor));\r\n      console.log(\"‚úÖ Registered face loaded\");\r\n    } else {\r\n      alert(\"Invalid face descriptor. Please register your face first.\");\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Failed to load registered face:\", err);\r\n    alert(\"‚ùå Could not load registered face. Please register first.\");\r\n  }\r\n};\r\n\r\n\r\n  const startContinuousChecks = () => {\r\n    detectionInterval.current = setInterval(async () => {\r\n      await performAllChecks();\r\n    }, 1000);\r\n  };\r\nconst performAllChecks = async () => {\r\n  if (!videoRef.current || videoRef.current.readyState !== 4) {\r\n    updateCheck(\"camera\", \"pending\", \"‚è≥ Waiting for camera...\");\r\n    return;\r\n  }\r\n\r\n  if (!registeredDescriptor) {\r\n    updateCheck(\"identity\", \"pending\", \"‚è≥ Loading registered face...\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Detect faces\r\n    const detections = await faceapi\r\n      .detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions({ inputSize: 224 }))\r\n      .withFaceLandmarks()\r\n      .withFaceDescriptors();\r\n\r\n    console.log(\"Detections:\", detections);\r\n\r\n    const issues = [];\r\n\r\n    // --- Face Detection ---\r\n    if (detections.length === 0) {\r\n      updateCheck(\"faceDetection\", \"warning\", \"‚ö† No face detected\");\r\n      updateCheck(\"identity\", \"pending\", \"‚è≥ Waiting for face...\");\r\n      updateCheck(\"singlePerson\", \"pending\", \"‚è≥ Waiting for face...\");\r\n      issues.push(\"Position your face in front of the camera\");\r\n    } else {\r\n      updateCheck(\"faceDetection\", \"success\", \"‚úì Face detected\");\r\n    }\r\n\r\n    // --- Single Person Check ---\r\n    if (detections.length > 1) {\r\n      updateCheck(\"singlePerson\", \"error\", `‚úó ${detections.length} people detected`);\r\n      issues.push(\"Multiple people detected. Only you should be visible.\");\r\n    } else if (detections.length === 1) {\r\n      updateCheck(\"singlePerson\", \"success\", \"‚úì Single person confirmed\");\r\n    }\r\n\r\n    // --- Lighting Check ---\r\n    if (detections.length === 1) {\r\n      const lightingScore = detections[0].detection.score;\r\n      if (lightingScore < 0.3) {\r\n        updateCheck(\"lighting\", \"warning\", \"‚ö† Poor lighting - improve lighting\");\r\n        issues.push(\"Lighting is poor. Please improve lighting conditions.\");\r\n      } else if (lightingScore < 0.6) {\r\n        updateCheck(\"lighting\", \"warning\", \"‚ö† Lighting could be better\");\r\n        issues.push(\"Lighting could be improved for better detection.\");\r\n      } else {\r\n        updateCheck(\"lighting\", \"success\", \"‚úì Lighting is good\");\r\n      }\r\n    }\r\n\r\n    // --- Identity Check ---\r\n    if (detections.length === 1) {\r\n      const distance = faceapi.euclideanDistance(registeredDescriptor, detections[0].descriptor);\r\n      const threshold = 0.6;\r\n      const isMatch = distance < threshold;\r\n      const confidence = Math.max(0, (1 - distance) * 100);\r\n\r\n      if (isMatch) {\r\n        updateCheck(\"identity\", \"success\", `‚úì Identity verified (${confidence.toFixed(1)}% match)`);\r\n      } else {\r\n        updateCheck(\"identity\", \"error\", `‚úó Identity mismatch (${confidence.toFixed(1)}% match)`);\r\n        issues.push(\"Face doesn't match registered face.\");\r\n      }\r\n    }\r\n\r\n    setCurrentIssues(issues);\r\n\r\n    // --- Can Proceed ---\r\n    // Allow proceeding if face detected, single person, and identity verified (or no issues)\r\n    const canProceedNow =\r\n      detections.length === 1 &&\r\n      issues.length === 0;\r\n\r\n    setCanProceed(canProceedNow);\r\n\r\n    // --- Draw Canvas ---\r\n    if (canvasRef.current && detections.length > 0) {\r\n      const dims = faceapi.matchDimensions(canvasRef.current, videoRef.current, true);\r\n      const resizedDetections = faceapi.resizeResults(detections, dims);\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n      faceapi.draw.drawDetections(canvasRef.current, resizedDetections);\r\n      faceapi.draw.drawFaceLandmarks(canvasRef.current, resizedDetections);\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(\"Error in performAllChecks:\", error);\r\n    updateCheck(\"faceDetection\", \"error\", \"‚úó Detection error. Check console.\");\r\n    updateCheck(\"identity\", \"error\", \"‚úó Detection error.\");\r\n    setCanProceed(false);\r\n  }\r\n};\r\n\r\n\r\n// --- Sliding window helper ---\r\nconst pushVerificationHistory = (result, issues) => {\r\n  setVerificationHistory(prev => {\r\n    const newHistory = [...prev.slice(-2), result]; // keep last 2 + new = 3\r\n    const windowCheck = newHistory;\r\n\r\n    if (windowCheck.length === 3 && windowCheck.every(v => v) && issues.length === 0) {\r\n      setCanProceed(true);\r\n      console.log(\"‚úÖ All checks passed! Can proceed.\");\r\n    } else {\r\n      setCanProceed(false);\r\n    }\r\n\r\n    console.log(\"Verification sliding window:\", windowCheck);\r\n    return newHistory;\r\n  });\r\n};\r\n\r\n\r\n\r\n\r\n// till here perform all checks\r\n  const updateCheck = (checkName, status, message) => {\r\n    setChecks((prev) => ({\r\n      ...prev,\r\n      [checkName]: { status, message }\r\n    }));\r\n  };\r\n\r\n  const handleProceed = () => {\r\n  if (canProceed) {\r\n    stopCamera();\r\n    onProceed();\r\n  }\r\n};\r\n\r\n  const handleCancel = () => {\r\n    stopCamera();\r\n    onCancel();\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case \"success\": return \"‚úì\";\r\n      case \"error\": return \"‚úó\";\r\n      case \"warning\": return \"‚ö†\";\r\n      case \"pending\": return \"‚è≥\";\r\n      default: return \"‚óã\";\r\n    }\r\n  };\r\n\r\n  const getStatusClass = (status) => `check-item status-${status}`;\r\n\r\n  return (\r\n    <div className=\"pre-exam-setup\">\r\n      <div className=\"setup-container\">\r\n        <div className=\"setup-header\">\r\n          <h2>üì∏ Pre-Exam System Check</h2>\r\n          <p>Please ensure all checks pass before starting the exam</p>\r\n        </div>\r\n\r\n        <div className=\"setup-content\">\r\n          <div className=\"camera-section\">\r\n            <div className=\"camera-preview\">\r\n              <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                muted\r\n                className=\"preview-video\"\r\n                onLoadedMetadata={() => {\r\n                  if (canvasRef.current && videoRef.current) {\r\n                    canvasRef.current.width = videoRef.current.videoWidth;\r\n                    canvasRef.current.height = videoRef.current.videoHeight;\r\n                  }\r\n                }}\r\n              />\r\n              <canvas ref={canvasRef} className=\"preview-canvas\" />\r\n            </div>\r\n            {currentIssues.length > 0 && (\r\n              <div className=\"current-issues\">\r\n                <h4>‚ö†Ô∏è Current Issues:</h4>\r\n                <ul>\r\n                  {currentIssues.map((issue, index) => (\r\n                    <li key={index}>{issue}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"checks-section\">\r\n            <h3>System Checks</h3>\r\n            <div className=\"checks-list\">\r\n              {Object.entries(checks).map(([key, value]) => (\r\n                <div key={key} className={getStatusClass(value.status)}>\r\n                  <span className=\"check-icon\">{getStatusIcon(value.status)}</span>\r\n                  <span className=\"check-message\">{value.message}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"setup-actions\">\r\n          <button onClick={handleCancel} className=\"btn-cancel\">Cancel</button>\r\n          <button onClick={handleProceed} disabled={!canProceed} className=\"btn-proceed\">\r\n            {canProceed ? \"‚úì Start Exam\" : \"‚è≥ Waiting for all checks\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}