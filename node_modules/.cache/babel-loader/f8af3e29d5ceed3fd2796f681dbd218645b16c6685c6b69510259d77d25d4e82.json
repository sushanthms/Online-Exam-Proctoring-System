{"ast":null,"code":"var _jsxFileName = \"C:\\\\Online Exam Proctoring System\\\\frontend\\\\src\\\\components\\\\FaceRegistration.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport \"./FaceRegistration.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function FaceRegistration({\n  user,\n  onComplete\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [status, setStatus] = useState(\"initializing\");\n  const [message, setMessage] = useState(\"Loading face detection models...\");\n  const [capturedDescriptor, setCapturedDescriptor] = useState(null);\n  const [captureCount, setCaptureCount] = useState(0);\n  const detectionInterval = useRef(null);\n  useEffect(() => {\n    loadModelsAndStartCamera();\n    return () => {\n      stopCamera();\n      if (detectionInterval.current) clearInterval(detectionInterval.current);\n    };\n  }, []);\n  const loadModelsAndStartCamera = async () => {\n    try {\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\n      await Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL), faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL), faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL)]);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: 640,\n          height: 480\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        setStatus(\"ready\");\n        setMessage(\"Position your face in the camera\");\n      }\n    } catch (err) {\n      console.error(\"Error:\", err);\n      setStatus(\"error\");\n      setMessage(\"Failed to access camera or load models\");\n    }\n  };\n  const stopCamera = () => {\n    if (videoRef.current && videoRef.current.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n    }\n  };\n  const startCapture = async () => {\n    setStatus(\"capturing\");\n    setMessage(\"Keep your face steady...\");\n    setCaptureCount(0);\n    const descriptors = [];\n    detectionInterval.current = setInterval(async () => {\n      if (!videoRef.current) return;\n      try {\n        const detection = await faceapi.detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();\n        if (detection) {\n          descriptors.push(Array.from(detection.descriptor));\n          setCaptureCount(prev => prev + 1);\n\n          // Draw detection on canvas\n          if (canvasRef.current) {\n            const dims = faceapi.matchDimensions(canvasRef.current, videoRef.current, true);\n            const resizedDetection = faceapi.resizeResults(detection, dims);\n            faceapi.draw.drawDetections(canvasRef.current, resizedDetection);\n            faceapi.draw.drawFaceLandmarks(canvasRef.current, resizedDetection);\n          }\n\n          // Capture 5 samples\n          if (descriptors.length >= 5) {\n            clearInterval(detectionInterval.current);\n\n            // Average the descriptors for better accuracy\n            const avgDescriptor = averageDescriptors(descriptors);\n            setCapturedDescriptor(avgDescriptor);\n            setStatus(\"captured\");\n            setMessage(\"Face captured successfully!\");\n          }\n        } else {\n          setMessage(\"No face detected. Please position your face clearly.\");\n        }\n      } catch (error) {\n        console.error(\"Detection error:\", error);\n      }\n    }, 500);\n  };\n  const averageDescriptors = descriptors => {\n    const avg = new Array(128).fill(0);\n    descriptors.forEach(desc => {\n      desc.forEach((val, idx) => {\n        avg[idx] += val;\n      });\n    });\n    return avg.map(val => val / descriptors.length);\n  };\n  const handleRegister = async () => {\n    if (!capturedDescriptor) return;\n    setStatus(\"registering\");\n    setMessage(\"Registering your face...\");\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(\"http://localhost:4000/api/auth/register-face\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          faceDescriptor: capturedDescriptor\n        })\n      });\n      if (response.ok) {\n        setStatus(\"success\");\n        setMessage(\"Face registered successfully!\");\n        stopCamera();\n        setTimeout(() => onComplete && onComplete(), 2000);\n      } else {\n        throw new Error(\"Registration failed\");\n      }\n    } catch (error) {\n      console.error(\"Error registering face:\", error);\n      setStatus(\"error\");\n      setMessage(\"Failed to register face. Please try again.\");\n    }\n  };\n  const handleRetry = () => {\n    setCapturedDescriptor(null);\n    setCaptureCount(0);\n    setStatus(\"ready\");\n    setMessage(\"Position your face in the camera\");\n\n    // Clear canvas\n    if (canvasRef.current) {\n      const ctx = canvasRef.current.getContext('2d');\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"face-registration-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"face-registration-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCF8 Face Registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subtitle\",\n        children: \"Register your face for identity verification during exams\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"camera-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          muted: true,\n          className: \"camera-video\",\n          onLoadedMetadata: () => {\n            if (canvasRef.current && videoRef.current) {\n              canvasRef.current.width = videoRef.current.videoWidth;\n              canvasRef.current.height = videoRef.current.videoHeight;\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"detection-canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `status-indicator ${status}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this), status === \"capturing\" && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"capture-progress\",\n          children: [\"Captured: \", captureCount, \"/5\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instructions\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Instructions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2713 Ensure good lighting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2713 Look directly at the camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2713 Remove glasses if possible\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2713 Keep your face centered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2713 Maintain a neutral expression\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"action-buttons\",\n        children: [status === \"ready\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startCapture,\n          className: \"btn-primary\",\n          children: \"Start Capture\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), status === \"captured\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRegister,\n            className: \"btn-success\",\n            children: \"\\u2713 Register Face\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRetry,\n            className: \"btn-secondary\",\n            children: \"\\uD83D\\uDD04 Retry\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), status === \"success\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-success\",\n          disabled: true,\n          children: \"\\u2713 Registered Successfully\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), status === \"error\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRetry,\n          className: \"btn-retry\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n}\n_s(FaceRegistration, \"Z6XmiQNxleXROq2YSsoyixJ3N+Q=\");\n_c = FaceRegistration;\nvar _c;\n$RefreshReg$(_c, \"FaceRegistration\");","map":{"version":3,"names":["React","useEffect","useRef","useState","faceapi","jsxDEV","_jsxDEV","Fragment","_Fragment","FaceRegistration","user","onComplete","_s","videoRef","canvasRef","status","setStatus","message","setMessage","capturedDescriptor","setCapturedDescriptor","captureCount","setCaptureCount","detectionInterval","loadModelsAndStartCamera","stopCamera","current","clearInterval","MODEL_URL","process","env","PUBLIC_URL","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","stream","navigator","mediaDevices","getUserMedia","video","width","height","srcObject","err","console","error","getTracks","forEach","track","stop","startCapture","descriptors","setInterval","detection","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","withFaceDescriptor","push","Array","from","descriptor","prev","dims","matchDimensions","resizedDetection","resizeResults","draw","drawDetections","drawFaceLandmarks","length","avgDescriptor","averageDescriptors","avg","fill","desc","val","idx","map","handleRegister","token","localStorage","getItem","response","fetch","method","headers","Authorization","body","JSON","stringify","faceDescriptor","ok","setTimeout","Error","handleRetry","ctx","getContext","clearRect","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","muted","onLoadedMetadata","videoWidth","videoHeight","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/FaceRegistration.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as faceapi from \"face-api.js\";\r\nimport \"./FaceRegistration.css\";\r\n\r\nexport default function FaceRegistration({ user, onComplete }) {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [status, setStatus] = useState(\"initializing\");\r\n  const [message, setMessage] = useState(\"Loading face detection models...\");\r\n  const [capturedDescriptor, setCapturedDescriptor] = useState(null);\r\n  const [captureCount, setCaptureCount] = useState(0);\r\n  const detectionInterval = useRef(null);\r\n\r\n  useEffect(() => {\r\n    loadModelsAndStartCamera();\r\n    return () => {\r\n      stopCamera();\r\n      if (detectionInterval.current) clearInterval(detectionInterval.current);\r\n    };\r\n  }, []);\r\n\r\n  const loadModelsAndStartCamera = async () => {\r\n    try {\r\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\r\n      await Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL),\r\n      ]);\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { width: 640, height: 480 } \r\n      });\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        setStatus(\"ready\");\r\n        setMessage(\"Position your face in the camera\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error:\", err);\r\n      setStatus(\"error\");\r\n      setMessage(\"Failed to access camera or load models\");\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n    }\r\n  };\r\n\r\n  const startCapture = async () => {\r\n    setStatus(\"capturing\");\r\n    setMessage(\"Keep your face steady...\");\r\n    setCaptureCount(0);\r\n\r\n    const descriptors = [];\r\n\r\n    detectionInterval.current = setInterval(async () => {\r\n      if (!videoRef.current) return;\r\n\r\n      try {\r\n        const detection = await faceapi\r\n          .detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions())\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptor();\r\n\r\n        if (detection) {\r\n          descriptors.push(Array.from(detection.descriptor));\r\n          setCaptureCount(prev => prev + 1);\r\n\r\n          // Draw detection on canvas\r\n          if (canvasRef.current) {\r\n            const dims = faceapi.matchDimensions(canvasRef.current, videoRef.current, true);\r\n            const resizedDetection = faceapi.resizeResults(detection, dims);\r\n            faceapi.draw.drawDetections(canvasRef.current, resizedDetection);\r\n            faceapi.draw.drawFaceLandmarks(canvasRef.current, resizedDetection);\r\n          }\r\n\r\n          // Capture 5 samples\r\n          if (descriptors.length >= 5) {\r\n            clearInterval(detectionInterval.current);\r\n            \r\n            // Average the descriptors for better accuracy\r\n            const avgDescriptor = averageDescriptors(descriptors);\r\n            setCapturedDescriptor(avgDescriptor);\r\n            setStatus(\"captured\");\r\n            setMessage(\"Face captured successfully!\");\r\n          }\r\n        } else {\r\n          setMessage(\"No face detected. Please position your face clearly.\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Detection error:\", error);\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n  const averageDescriptors = (descriptors) => {\r\n    const avg = new Array(128).fill(0);\r\n    descriptors.forEach(desc => {\r\n      desc.forEach((val, idx) => {\r\n        avg[idx] += val;\r\n      });\r\n    });\r\n    return avg.map(val => val / descriptors.length);\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    if (!capturedDescriptor) return;\r\n\r\n    setStatus(\"registering\");\r\n    setMessage(\"Registering your face...\");\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(\"http://localhost:4000/api/auth/register-face\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ faceDescriptor: capturedDescriptor }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setStatus(\"success\");\r\n        setMessage(\"Face registered successfully!\");\r\n        stopCamera();\r\n        setTimeout(() => onComplete && onComplete(), 2000);\r\n      } else {\r\n        throw new Error(\"Registration failed\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error registering face:\", error);\r\n      setStatus(\"error\");\r\n      setMessage(\"Failed to register face. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setCapturedDescriptor(null);\r\n    setCaptureCount(0);\r\n    setStatus(\"ready\");\r\n    setMessage(\"Position your face in the camera\");\r\n    \r\n    // Clear canvas\r\n    if (canvasRef.current) {\r\n      const ctx = canvasRef.current.getContext('2d');\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"face-registration-container\">\r\n      <div className=\"face-registration-card\">\r\n        <h2>ðŸ“¸ Face Registration</h2>\r\n        <p className=\"subtitle\">Register your face for identity verification during exams</p>\r\n\r\n        <div className=\"camera-container\">\r\n          <video\r\n            ref={videoRef}\r\n            autoPlay\r\n            muted\r\n            className=\"camera-video\"\r\n            onLoadedMetadata={() => {\r\n              if (canvasRef.current && videoRef.current) {\r\n                canvasRef.current.width = videoRef.current.videoWidth;\r\n                canvasRef.current.height = videoRef.current.videoHeight;\r\n              }\r\n            }}\r\n          />\r\n          <canvas ref={canvasRef} className=\"detection-canvas\" />\r\n        </div>\r\n\r\n        <div className=\"status-message\">\r\n          <div className={`status-indicator ${status}`}></div>\r\n          <p>{message}</p>\r\n          {status === \"capturing\" && (\r\n            <p className=\"capture-progress\">Captured: {captureCount}/5</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"instructions\">\r\n          <h4>Instructions:</h4>\r\n          <ul>\r\n            <li>âœ“ Ensure good lighting</li>\r\n            <li>âœ“ Look directly at the camera</li>\r\n            <li>âœ“ Remove glasses if possible</li>\r\n            <li>âœ“ Keep your face centered</li>\r\n            <li>âœ“ Maintain a neutral expression</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"action-buttons\">\r\n          {status === \"ready\" && (\r\n            <button onClick={startCapture} className=\"btn-primary\">\r\n              Start Capture\r\n            </button>\r\n          )}\r\n\r\n          {status === \"captured\" && (\r\n            <>\r\n              <button onClick={handleRegister} className=\"btn-success\">\r\n                âœ“ Register Face\r\n              </button>\r\n              <button onClick={handleRetry} className=\"btn-secondary\">\r\n                ðŸ”„ Retry\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          {status === \"success\" && (\r\n            <button className=\"btn-success\" disabled>\r\n              âœ“ Registered Successfully\r\n            </button>\r\n          )}\r\n\r\n          {status === \"error\" && (\r\n            <button onClick={handleRetry} className=\"btn-retry\">\r\n              Try Again\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}