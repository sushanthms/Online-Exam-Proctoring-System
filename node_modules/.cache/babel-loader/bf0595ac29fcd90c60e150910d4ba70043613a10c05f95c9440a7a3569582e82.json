{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import*as faceapi from\"face-api.js\";import\"./FaceRegistration.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function FaceRegistration(_ref){let{user,onComplete}=_ref;const videoRef=useRef(null);const canvasRef=useRef(null);const[status,setStatus]=useState(\"initializing\");const[message,setMessage]=useState(\"Loading face detection models...\");const[capturedDescriptor,setCapturedDescriptor]=useState(null);const[captureCount,setCaptureCount]=useState(0);const detectionInterval=useRef(null);useEffect(()=>{loadModelsAndStartCamera();return()=>{stopCamera();if(detectionInterval.current)clearInterval(detectionInterval.current);};},[]);const loadModelsAndStartCamera=async()=>{try{const MODEL_URL=process.env.PUBLIC_URL+\"/models\";await Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL)]);const stream=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}});if(videoRef.current){videoRef.current.srcObject=stream;setStatus(\"ready\");setMessage(\"Position your face in the camera\");}}catch(err){console.error(\"Error:\",err);setStatus(\"error\");setMessage(\"Failed to access camera or load models\");}};const stopCamera=()=>{if(videoRef.current&&videoRef.current.srcObject){videoRef.current.srcObject.getTracks().forEach(track=>track.stop());}};const startCapture=async()=>{setStatus(\"capturing\");setMessage(\"Keep your face steady...\");setCaptureCount(0);const descriptors=[];detectionInterval.current=setInterval(async()=>{if(!videoRef.current)return;try{const detection=await faceapi.detectSingleFace(videoRef.current,new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceDescriptor();if(detection){descriptors.push(Array.from(detection.descriptor));setCaptureCount(prev=>prev+1);// Draw detection on canvas\nif(canvasRef.current){const dims=faceapi.matchDimensions(canvasRef.current,videoRef.current,true);const resizedDetection=faceapi.resizeResults(detection,dims);faceapi.draw.drawDetections(canvasRef.current,resizedDetection);faceapi.draw.drawFaceLandmarks(canvasRef.current,resizedDetection);}// Capture 5 samples\nif(descriptors.length>=5){clearInterval(detectionInterval.current);// Average the descriptors for better accuracy\nconst avgDescriptor=averageDescriptors(descriptors);setCapturedDescriptor(avgDescriptor);setStatus(\"captured\");setMessage(\"Face captured successfully!\");}}else{setMessage(\"No face detected. Please position your face clearly.\");}}catch(error){console.error(\"Detection error:\",error);}},500);};const averageDescriptors=descriptors=>{const avg=new Array(128).fill(0);descriptors.forEach(desc=>{desc.forEach((val,idx)=>{avg[idx]+=val;});});return avg.map(val=>val/descriptors.length);};const handleRegister=async()=>{if(!capturedDescriptor)return;setStatus(\"registering\");setMessage(\"Registering your face...\");try{const token=localStorage.getItem(\"token\");const response=await fetch(\"http://localhost:4000/api/auth/register-face\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify({faceDescriptor:capturedDescriptor})});if(response.ok){setStatus(\"success\");setMessage(\"Face registered successfully!\");stopCamera();setTimeout(()=>onComplete&&onComplete(),2000);}else{throw new Error(\"Registration failed\");}}catch(error){console.error(\"Error registering face:\",error);setStatus(\"error\");setMessage(\"Failed to register face. Please try again.\");}};const handleRetry=()=>{setCapturedDescriptor(null);setCaptureCount(0);setStatus(\"ready\");setMessage(\"Position your face in the camera\");// Clear canvas\nif(canvasRef.current){const ctx=canvasRef.current.getContext('2d');ctx.clearRect(0,0,canvasRef.current.width,canvasRef.current.height);}};return/*#__PURE__*/_jsx(\"div\",{className:\"face-registration-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"face-registration-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCF8 Face Registration\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Register your face for identity verification during exams\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"camera-container\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,muted:true,className:\"camera-video\",onLoadedMetadata:()=>{if(canvasRef.current&&videoRef.current){canvasRef.current.width=videoRef.current.videoWidth;canvasRef.current.height=videoRef.current.videoHeight;}}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,className:\"detection-canvas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-message\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-indicator \".concat(status)}),/*#__PURE__*/_jsx(\"p\",{children:message}),status===\"capturing\"&&/*#__PURE__*/_jsxs(\"p\",{className:\"capture-progress\",children:[\"Captured: \",captureCount,\"/5\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Instructions:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Ensure good lighting\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Look directly at the camera\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Remove glasses if possible\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Keep your face centered\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Maintain a neutral expression\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[status===\"ready\"&&/*#__PURE__*/_jsx(\"button\",{onClick:startCapture,className:\"btn-primary\",children:\"Start Capture\"}),status===\"captured\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,className:\"btn-success\",children:\"\\u2713 Register Face\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"btn-secondary\",children:\"\\uD83D\\uDD04 Retry\"})]}),status===\"success\"&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-success\",disabled:true,children:\"\\u2713 Registered Successfully\"}),status===\"error\"&&/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"btn-retry\",children:\"Try Again\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","faceapi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FaceRegistration","_ref","user","onComplete","videoRef","canvasRef","status","setStatus","message","setMessage","capturedDescriptor","setCapturedDescriptor","captureCount","setCaptureCount","detectionInterval","loadModelsAndStartCamera","stopCamera","current","clearInterval","MODEL_URL","process","env","PUBLIC_URL","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","stream","navigator","mediaDevices","getUserMedia","video","width","height","srcObject","err","console","error","getTracks","forEach","track","stop","startCapture","descriptors","setInterval","detection","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","withFaceDescriptor","push","Array","from","descriptor","prev","dims","matchDimensions","resizedDetection","resizeResults","draw","drawDetections","drawFaceLandmarks","length","avgDescriptor","averageDescriptors","avg","fill","desc","val","idx","map","handleRegister","token","localStorage","getItem","response","fetch","method","headers","Authorization","concat","body","JSON","stringify","faceDescriptor","ok","setTimeout","Error","handleRetry","ctx","getContext","clearRect","className","children","ref","autoPlay","muted","onLoadedMetadata","videoWidth","videoHeight","onClick","disabled"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/FaceRegistration.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport * as faceapi from \"face-api.js\";\r\nimport \"./FaceRegistration.css\";\r\n\r\nexport default function FaceRegistration({ user, onComplete }) {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [status, setStatus] = useState(\"initializing\");\r\n  const [message, setMessage] = useState(\"Loading face detection models...\");\r\n  const [capturedDescriptor, setCapturedDescriptor] = useState(null);\r\n  const [captureCount, setCaptureCount] = useState(0);\r\n  const detectionInterval = useRef(null);\r\n\r\n  useEffect(() => {\r\n    loadModelsAndStartCamera();\r\n    return () => {\r\n      stopCamera();\r\n      if (detectionInterval.current) clearInterval(detectionInterval.current);\r\n    };\r\n  }, []);\r\n\r\n  const loadModelsAndStartCamera = async () => {\r\n    try {\r\n      const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\r\n      await Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceRecognitionNet.loadFromUri(MODEL_URL),\r\n      ]);\r\n\r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { width: 640, height: 480 } \r\n      });\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        setStatus(\"ready\");\r\n        setMessage(\"Position your face in the camera\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error:\", err);\r\n      setStatus(\"error\");\r\n      setMessage(\"Failed to access camera or load models\");\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n    }\r\n  };\r\n\r\n  const startCapture = async () => {\r\n    setStatus(\"capturing\");\r\n    setMessage(\"Keep your face steady...\");\r\n    setCaptureCount(0);\r\n\r\n    const descriptors = [];\r\n\r\n    detectionInterval.current = setInterval(async () => {\r\n      if (!videoRef.current) return;\r\n\r\n      try {\r\n        const detection = await faceapi\r\n          .detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions())\r\n          .withFaceLandmarks()\r\n          .withFaceDescriptor();\r\n\r\n        if (detection) {\r\n          descriptors.push(Array.from(detection.descriptor));\r\n          setCaptureCount(prev => prev + 1);\r\n\r\n          // Draw detection on canvas\r\n          if (canvasRef.current) {\r\n            const dims = faceapi.matchDimensions(canvasRef.current, videoRef.current, true);\r\n            const resizedDetection = faceapi.resizeResults(detection, dims);\r\n            faceapi.draw.drawDetections(canvasRef.current, resizedDetection);\r\n            faceapi.draw.drawFaceLandmarks(canvasRef.current, resizedDetection);\r\n          }\r\n\r\n          // Capture 5 samples\r\n          if (descriptors.length >= 5) {\r\n            clearInterval(detectionInterval.current);\r\n            \r\n            // Average the descriptors for better accuracy\r\n            const avgDescriptor = averageDescriptors(descriptors);\r\n            setCapturedDescriptor(avgDescriptor);\r\n            setStatus(\"captured\");\r\n            setMessage(\"Face captured successfully!\");\r\n          }\r\n        } else {\r\n          setMessage(\"No face detected. Please position your face clearly.\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Detection error:\", error);\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n  const averageDescriptors = (descriptors) => {\r\n    const avg = new Array(128).fill(0);\r\n    descriptors.forEach(desc => {\r\n      desc.forEach((val, idx) => {\r\n        avg[idx] += val;\r\n      });\r\n    });\r\n    return avg.map(val => val / descriptors.length);\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    if (!capturedDescriptor) return;\r\n\r\n    setStatus(\"registering\");\r\n    setMessage(\"Registering your face...\");\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(\"http://localhost:4000/api/auth/register-face\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ faceDescriptor: capturedDescriptor }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setStatus(\"success\");\r\n        setMessage(\"Face registered successfully!\");\r\n        stopCamera();\r\n        setTimeout(() => onComplete && onComplete(), 2000);\r\n      } else {\r\n        throw new Error(\"Registration failed\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error registering face:\", error);\r\n      setStatus(\"error\");\r\n      setMessage(\"Failed to register face. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setCapturedDescriptor(null);\r\n    setCaptureCount(0);\r\n    setStatus(\"ready\");\r\n    setMessage(\"Position your face in the camera\");\r\n    \r\n    // Clear canvas\r\n    if (canvasRef.current) {\r\n      const ctx = canvasRef.current.getContext('2d');\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"face-registration-container\">\r\n      <div className=\"face-registration-card\">\r\n        <h2>ðŸ“¸ Face Registration</h2>\r\n        <p className=\"subtitle\">Register your face for identity verification during exams</p>\r\n\r\n        <div className=\"camera-container\">\r\n          <video\r\n            ref={videoRef}\r\n            autoPlay\r\n            muted\r\n            className=\"camera-video\"\r\n            onLoadedMetadata={() => {\r\n              if (canvasRef.current && videoRef.current) {\r\n                canvasRef.current.width = videoRef.current.videoWidth;\r\n                canvasRef.current.height = videoRef.current.videoHeight;\r\n              }\r\n            }}\r\n          />\r\n          <canvas ref={canvasRef} className=\"detection-canvas\" />\r\n        </div>\r\n\r\n        <div className=\"status-message\">\r\n          <div className={`status-indicator ${status}`}></div>\r\n          <p>{message}</p>\r\n          {status === \"capturing\" && (\r\n            <p className=\"capture-progress\">Captured: {captureCount}/5</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"instructions\">\r\n          <h4>Instructions:</h4>\r\n          <ul>\r\n            <li>âœ“ Ensure good lighting</li>\r\n            <li>âœ“ Look directly at the camera</li>\r\n            <li>âœ“ Remove glasses if possible</li>\r\n            <li>âœ“ Keep your face centered</li>\r\n            <li>âœ“ Maintain a neutral expression</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"action-buttons\">\r\n          {status === \"ready\" && (\r\n            <button onClick={startCapture} className=\"btn-primary\">\r\n              Start Capture\r\n            </button>\r\n          )}\r\n\r\n          {status === \"captured\" && (\r\n            <>\r\n              <button onClick={handleRegister} className=\"btn-success\">\r\n                âœ“ Register Face\r\n              </button>\r\n              <button onClick={handleRetry} className=\"btn-secondary\">\r\n                ðŸ”„ Retry\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          {status === \"success\" && (\r\n            <button className=\"btn-success\" disabled>\r\n              âœ“ Registered Successfully\r\n            </button>\r\n          )}\r\n\r\n          {status === \"error\" && (\r\n            <button onClick={handleRetry} className=\"btn-retry\">\r\n              Try Again\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}