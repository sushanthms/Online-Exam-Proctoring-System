{"ast":null,"code":"var _jsxFileName = \"C:\\\\Online Exam Proctoring System\\\\frontend\\\\src\\\\components\\\\ExamPage.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ExamPage.js\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport * as faceapi from \"face-api.js\";\nimport \"./ExamPage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ExamPage({\n  user\n}) {\n  _s();\n  const {\n    examId\n  } = useParams();\n  const navigate = useNavigate();\n  const [paper, setPaper] = useState(null);\n  const [answers, setAnswers] = useState([]);\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [timerStarted, setTimerStarted] = useState(false);\n  const [tabSwitchCount, setTabSwitchCount] = useState(0);\n  const [verificationFailures, setVerificationFailures] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const videoRef = useRef(null);\n  const isSubmitting = useRef(false);\n\n  // üì∏ Initialize face detection\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      videoRef.current.srcObject = stream;\n      await faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\");\n      detectFaceContinuously();\n    } catch (err) {\n      console.error(\"Camera error:\", err);\n      alert(\"Camera access is required for this exam.\");\n    }\n  };\n  const stopCamera = () => {\n    var _videoRef$current;\n    const stream = (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.srcObject;\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      videoRef.current.srcObject = null;\n    }\n  };\n\n  // üß† Continuous face detection\n  const detectFaceContinuously = async () => {\n    const detect = async () => {\n      if (!videoRef.current) return;\n      const detection = await faceapi.detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions());\n      if (!detection) {\n        setVerificationFailures(prev => {\n          const updated = prev + 1;\n          if (updated >= 3) {\n            alert(\"Face not detected 3 times. Exam auto-submitted.\");\n            handleSubmit();\n          }\n          return updated;\n        });\n      }\n      setTimeout(detect, 5000); // every 5 seconds\n    };\n    detect();\n  };\n\n  // ‚è± Timer logic\n  useEffect(() => {\n    let timer;\n    if (timerStarted && timeLeft > 0) {\n      timer = setInterval(() => setTimeLeft(prev => prev - 1), 1000);\n    } else if (timeLeft === 0 && timerStarted) {\n      handleSubmit();\n    }\n    return () => clearInterval(timer);\n  }, [timerStarted, timeLeft]);\n\n  // üßæ Fetch exam data\n  useEffect(() => {\n    const fetchExam = async () => {\n      try {\n        const res = await fetch(`http://localhost:4000/api/exam/${examId}`);\n        const data = await res.json();\n        setPaper(data);\n        setAnswers(new Array(data.questions.length).fill(null));\n        setTimeLeft(data.duration * 60);\n        setLoading(false);\n        startCamera();\n      } catch (err) {\n        console.error(\"Failed to fetch exam:\", err);\n        alert(\"Failed to load exam.\");\n        setLoading(false);\n      }\n    };\n    fetchExam();\n  }, [examId]);\n\n  // üö´ Detect tab switches\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        setTabSwitchCount(prev => {\n          const updated = prev + 1;\n          if (updated >= 3) {\n            alert(\"Switched tabs 3 times. Exam auto-submitted.\");\n            handleSubmit();\n          }\n          return updated;\n        });\n      }\n    };\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    return () => document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n  }, []);\n\n  // üíæ Handle answer change\n  const handleAnswerChange = (index, value) => {\n    const newAnswers = [...answers];\n    newAnswers[index] = value;\n    setAnswers(newAnswers);\n  };\n\n  // ‚è∞ Start exam\n  const handleStart = () => {\n    if (paper) setTimerStarted(true);\n  };\n\n  // üßÆ Format timer\n  const formatTime = seconds => {\n    const m = Math.floor(seconds / 60);\n    const s = seconds % 60;\n    return `${m}:${s.toString().padStart(2, \"0\")}`;\n  };\n\n  // üì® Submit exam\n  const handleSubmit = async () => {\n    if (isSubmitting.current) return;\n    if (!paper) return alert(\"Exam not loaded!\");\n    const isAutoSubmit = tabSwitchCount >= 3 || timeLeft <= 0 || verificationFailures >= 3;\n    if (!isAutoSubmit) {\n      const confirmSubmit = window.confirm(`Are you sure you want to submit?\\n\\n` + `Time Remaining: ${formatTime(timeLeft)}\\n` + `Questions Answered: ${answers.filter(a => a !== null).length}/${answers.length}\\n\\n` + `You cannot change your answers after submission.`);\n      if (!confirmSubmit) return;\n    }\n    isSubmitting.current = true;\n    try {\n      const response = await fetch(\"http://localhost:4000/api/exam/submit\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        body: JSON.stringify({\n          userId: user._id,\n          examId,\n          answers,\n          tabSwitches: tabSwitchCount,\n          verificationFailures\n        })\n      });\n      if (!response.ok) throw new Error(`Submit failed: ${response.status}`);\n      const data = await response.json();\n      if (data.submissionId) {\n        stopCamera();\n        navigate(`/result/${data.submissionId}`);\n      } else {\n        throw new Error(\"No submission ID returned\");\n      }\n    } catch (err) {\n      console.error(\"Submit error:\", err);\n      alert(\"‚ùå Failed to submit exam. Please try again.\");\n      isSubmitting.current = false;\n    }\n  };\n\n  // üñ• Render\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exam-loading\",\n    children: \"Loading exam...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exam-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: paper === null || paper === void 0 ? void 0 : paper.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Time Left: \", formatTime(timeLeft)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Tab Switches: \", tabSwitchCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Face Detection Failures: \", verificationFailures]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      muted: true,\n      width: \"200\",\n      height: \"150\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), !timerStarted ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleStart,\n      children: \"Start Exam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"questions\",\n        children: paper === null || paper === void 0 ? void 0 : paper.questions.map((q, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [index + 1, \". \", q.question]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this), q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: `q${index}`,\n              value: opt,\n              checked: answers[index] === opt,\n              onChange: e => handleAnswerChange(index, e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 21\n            }, this), opt]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 19\n          }, this))]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        children: \"Submit Exam\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n}\n_s(ExamPage, \"8KbQvtYziM5ovvgQ0VLOBBGVYbM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ExamPage;\nvar _c;\n$RefreshReg$(_c, \"ExamPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","useParams","faceapi","jsxDEV","_jsxDEV","Fragment","_Fragment","ExamPage","user","_s","examId","navigate","paper","setPaper","answers","setAnswers","timeLeft","setTimeLeft","timerStarted","setTimerStarted","tabSwitchCount","setTabSwitchCount","verificationFailures","setVerificationFailures","loading","setLoading","videoRef","isSubmitting","startCamera","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","nets","tinyFaceDetector","loadFromUri","detectFaceContinuously","err","console","error","alert","stopCamera","_videoRef$current","getTracks","forEach","track","stop","detect","detection","detectSingleFace","TinyFaceDetectorOptions","prev","updated","handleSubmit","setTimeout","timer","setInterval","clearInterval","fetchExam","res","fetch","data","json","Array","questions","length","fill","duration","handleVisibilityChange","document","hidden","addEventListener","removeEventListener","handleAnswerChange","index","value","newAnswers","handleStart","formatTime","seconds","m","Math","floor","s","toString","padStart","isAutoSubmit","confirmSubmit","window","confirm","filter","a","response","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","userId","_id","tabSwitches","ok","Error","status","submissionId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","ref","autoPlay","muted","width","height","onClick","map","q","question","options","opt","i","type","name","checked","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/ExamPage.js"],"sourcesContent":["// frontend/src/pages/ExamPage.js\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport * as faceapi from \"face-api.js\";\r\nimport \"./ExamPage.css\";\r\n\r\nexport default function ExamPage({ user }) {\r\n  const { examId } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [paper, setPaper] = useState(null);\r\n  const [answers, setAnswers] = useState([]);\r\n  const [timeLeft, setTimeLeft] = useState(0);\r\n  const [timerStarted, setTimerStarted] = useState(false);\r\n  const [tabSwitchCount, setTabSwitchCount] = useState(0);\r\n  const [verificationFailures, setVerificationFailures] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const videoRef = useRef(null);\r\n  const isSubmitting = useRef(false);\r\n\r\n  // üì∏ Initialize face detection\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      videoRef.current.srcObject = stream;\r\n      await faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\");\r\n      detectFaceContinuously();\r\n    } catch (err) {\r\n      console.error(\"Camera error:\", err);\r\n      alert(\"Camera access is required for this exam.\");\r\n    }\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    const stream = videoRef.current?.srcObject;\r\n    if (stream) {\r\n      stream.getTracks().forEach(track => track.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n  };\r\n\r\n  // üß† Continuous face detection\r\n  const detectFaceContinuously = async () => {\r\n    const detect = async () => {\r\n      if (!videoRef.current) return;\r\n\r\n      const detection = await faceapi.detectSingleFace(\r\n        videoRef.current,\r\n        new faceapi.TinyFaceDetectorOptions()\r\n      );\r\n\r\n      if (!detection) {\r\n        setVerificationFailures(prev => {\r\n          const updated = prev + 1;\r\n          if (updated >= 3) {\r\n            alert(\"Face not detected 3 times. Exam auto-submitted.\");\r\n            handleSubmit();\r\n          }\r\n          return updated;\r\n        });\r\n      }\r\n\r\n      setTimeout(detect, 5000); // every 5 seconds\r\n    };\r\n    detect();\r\n  };\r\n\r\n  // ‚è± Timer logic\r\n  useEffect(() => {\r\n    let timer;\r\n    if (timerStarted && timeLeft > 0) {\r\n      timer = setInterval(() => setTimeLeft(prev => prev - 1), 1000);\r\n    } else if (timeLeft === 0 && timerStarted) {\r\n      handleSubmit();\r\n    }\r\n    return () => clearInterval(timer);\r\n  }, [timerStarted, timeLeft]);\r\n\r\n  // üßæ Fetch exam data\r\n  useEffect(() => {\r\n    const fetchExam = async () => {\r\n      try {\r\n        const res = await fetch(`http://localhost:4000/api/exam/${examId}`);\r\n        const data = await res.json();\r\n        setPaper(data);\r\n        setAnswers(new Array(data.questions.length).fill(null));\r\n        setTimeLeft(data.duration * 60);\r\n        setLoading(false);\r\n        startCamera();\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch exam:\", err);\r\n        alert(\"Failed to load exam.\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchExam();\r\n  }, [examId]);\r\n\r\n  // üö´ Detect tab switches\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (document.hidden) {\r\n        setTabSwitchCount(prev => {\r\n          const updated = prev + 1;\r\n          if (updated >= 3) {\r\n            alert(\"Switched tabs 3 times. Exam auto-submitted.\");\r\n            handleSubmit();\r\n          }\r\n          return updated;\r\n        });\r\n      }\r\n    };\r\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\r\n    return () => document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\r\n  }, []);\r\n\r\n  // üíæ Handle answer change\r\n  const handleAnswerChange = (index, value) => {\r\n    const newAnswers = [...answers];\r\n    newAnswers[index] = value;\r\n    setAnswers(newAnswers);\r\n  };\r\n\r\n  // ‚è∞ Start exam\r\n  const handleStart = () => {\r\n    if (paper) setTimerStarted(true);\r\n  };\r\n\r\n  // üßÆ Format timer\r\n  const formatTime = seconds => {\r\n    const m = Math.floor(seconds / 60);\r\n    const s = seconds % 60;\r\n    return `${m}:${s.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  // üì® Submit exam\r\n  const handleSubmit = async () => {\r\n    if (isSubmitting.current) return;\r\n    if (!paper) return alert(\"Exam not loaded!\");\r\n\r\n    const isAutoSubmit = tabSwitchCount >= 3 || timeLeft <= 0 || verificationFailures >= 3;\r\n\r\n    if (!isAutoSubmit) {\r\n      const confirmSubmit = window.confirm(\r\n        `Are you sure you want to submit?\\n\\n` +\r\n        `Time Remaining: ${formatTime(timeLeft)}\\n` +\r\n        `Questions Answered: ${answers.filter(a => a !== null).length}/${answers.length}\\n\\n` +\r\n        `You cannot change your answers after submission.`\r\n      );\r\n      if (!confirmSubmit) return;\r\n    }\r\n\r\n    isSubmitting.current = true;\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:4000/api/exam/submit\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n        },\r\n        body: JSON.stringify({\r\n          userId: user._id,\r\n          examId,\r\n          answers,\r\n          tabSwitches: tabSwitchCount,\r\n          verificationFailures,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) throw new Error(`Submit failed: ${response.status}`);\r\n      const data = await response.json();\r\n\r\n      if (data.submissionId) {\r\n        stopCamera();\r\n        navigate(`/result/${data.submissionId}`);\r\n      } else {\r\n        throw new Error(\"No submission ID returned\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Submit error:\", err);\r\n      alert(\"‚ùå Failed to submit exam. Please try again.\");\r\n      isSubmitting.current = false;\r\n    }\r\n  };\r\n\r\n  // üñ• Render\r\n  if (loading) return <div className=\"exam-loading\">Loading exam...</div>;\r\n\r\n  return (\r\n    <div className=\"exam-page\">\r\n      <h2>{paper?.title}</h2>\r\n      <p>Time Left: {formatTime(timeLeft)}</p>\r\n      <p>Tab Switches: {tabSwitchCount}</p>\r\n      <p>Face Detection Failures: {verificationFailures}</p>\r\n\r\n      <video ref={videoRef} autoPlay muted width=\"200\" height=\"150\" />\r\n\r\n      {!timerStarted ? (\r\n        <button onClick={handleStart}>Start Exam</button>\r\n      ) : (\r\n        <>\r\n          <div className=\"questions\">\r\n            {paper?.questions.map((q, index) => (\r\n              <div key={index} className=\"question\">\r\n                <p>{index + 1}. {q.question}</p>\r\n                {q.options.map((opt, i) => (\r\n                  <label key={i}>\r\n                    <input\r\n                      type=\"radio\"\r\n                      name={`q${index}`}\r\n                      value={opt}\r\n                      checked={answers[index] === opt}\r\n                      onChange={e => handleAnswerChange(index, e.target.value)}\r\n                    />\r\n                    {opt}\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <button onClick={handleSubmit}>Submit Exam</button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACzD,OAAO,KAAKC,OAAO,MAAM,aAAa;AACtC,OAAO,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAExB,eAAe,SAASC,QAAQA,CAAC;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM;IAAEC;EAAO,CAAC,GAAGT,SAAS,CAAC,CAAC;EAC9B,MAAMU,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACmB,YAAY,EAAEC,eAAe,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACqB,cAAc,EAAEC,iBAAiB,CAAC,GAAGtB,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACuB,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGxB,QAAQ,CAAC,CAAC,CAAC;EACnE,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAM2B,QAAQ,GAAG5B,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAM6B,YAAY,GAAG7B,MAAM,CAAC,KAAK,CAAC;;EAElC;EACA,MAAM8B,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC;MACzEP,QAAQ,CAACQ,OAAO,CAACC,SAAS,GAAGN,MAAM;MACnC,MAAM3B,OAAO,CAACkC,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAAC,SAAS,CAAC;MAC1DC,sBAAsB,CAAC,CAAC;IAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,GAAG,CAAC;MACnCG,KAAK,CAAC,0CAA0C,CAAC;IACnD;EACF,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IAAA,IAAAC,iBAAA;IACvB,MAAMhB,MAAM,IAAAgB,iBAAA,GAAGnB,QAAQ,CAACQ,OAAO,cAAAW,iBAAA,uBAAhBA,iBAAA,CAAkBV,SAAS;IAC1C,IAAIN,MAAM,EAAE;MACVA,MAAM,CAACiB,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MACjDvB,QAAQ,CAACQ,OAAO,CAACC,SAAS,GAAG,IAAI;IACnC;EACF,CAAC;;EAED;EACA,MAAMI,sBAAsB,GAAG,MAAAA,CAAA,KAAY;IACzC,MAAMW,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI,CAACxB,QAAQ,CAACQ,OAAO,EAAE;MAEvB,MAAMiB,SAAS,GAAG,MAAMjD,OAAO,CAACkD,gBAAgB,CAC9C1B,QAAQ,CAACQ,OAAO,EAChB,IAAIhC,OAAO,CAACmD,uBAAuB,CAAC,CACtC,CAAC;MAED,IAAI,CAACF,SAAS,EAAE;QACd5B,uBAAuB,CAAC+B,IAAI,IAAI;UAC9B,MAAMC,OAAO,GAAGD,IAAI,GAAG,CAAC;UACxB,IAAIC,OAAO,IAAI,CAAC,EAAE;YAChBZ,KAAK,CAAC,iDAAiD,CAAC;YACxDa,YAAY,CAAC,CAAC;UAChB;UACA,OAAOD,OAAO;QAChB,CAAC,CAAC;MACJ;MAEAE,UAAU,CAACP,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;IAC5B,CAAC;IACDA,MAAM,CAAC,CAAC;EACV,CAAC;;EAED;EACArD,SAAS,CAAC,MAAM;IACd,IAAI6D,KAAK;IACT,IAAIxC,YAAY,IAAIF,QAAQ,GAAG,CAAC,EAAE;MAChC0C,KAAK,GAAGC,WAAW,CAAC,MAAM1C,WAAW,CAACqC,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC;IAChE,CAAC,MAAM,IAAItC,QAAQ,KAAK,CAAC,IAAIE,YAAY,EAAE;MACzCsC,YAAY,CAAC,CAAC;IAChB;IACA,OAAO,MAAMI,aAAa,CAACF,KAAK,CAAC;EACnC,CAAC,EAAE,CAACxC,YAAY,EAAEF,QAAQ,CAAC,CAAC;;EAE5B;EACAnB,SAAS,CAAC,MAAM;IACd,MAAMgE,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,kCAAkCrD,MAAM,EAAE,CAAC;QACnE,MAAMsD,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;QAC7BpD,QAAQ,CAACmD,IAAI,CAAC;QACdjD,UAAU,CAAC,IAAImD,KAAK,CAACF,IAAI,CAACG,SAAS,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvDpD,WAAW,CAAC+C,IAAI,CAACM,QAAQ,GAAG,EAAE,CAAC;QAC/B7C,UAAU,CAAC,KAAK,CAAC;QACjBG,WAAW,CAAC,CAAC;MACf,CAAC,CAAC,OAAOY,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;QAC3CG,KAAK,CAAC,sBAAsB,CAAC;QAC7BlB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IACDoC,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACnD,MAAM,CAAC,CAAC;;EAEZ;EACAb,SAAS,CAAC,MAAM;IACd,MAAM0E,sBAAsB,GAAGA,CAAA,KAAM;MACnC,IAAIC,QAAQ,CAACC,MAAM,EAAE;QACnBpD,iBAAiB,CAACiC,IAAI,IAAI;UACxB,MAAMC,OAAO,GAAGD,IAAI,GAAG,CAAC;UACxB,IAAIC,OAAO,IAAI,CAAC,EAAE;YAChBZ,KAAK,CAAC,6CAA6C,CAAC;YACpDa,YAAY,CAAC,CAAC;UAChB;UACA,OAAOD,OAAO;QAChB,CAAC,CAAC;MACJ;IACF,CAAC;IACDiB,QAAQ,CAACE,gBAAgB,CAAC,kBAAkB,EAAEH,sBAAsB,CAAC;IACrE,OAAO,MAAMC,QAAQ,CAACG,mBAAmB,CAAC,kBAAkB,EAAEJ,sBAAsB,CAAC;EACvF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMK,kBAAkB,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IAC3C,MAAMC,UAAU,GAAG,CAAC,GAAGjE,OAAO,CAAC;IAC/BiE,UAAU,CAACF,KAAK,CAAC,GAAGC,KAAK;IACzB/D,UAAU,CAACgE,UAAU,CAAC;EACxB,CAAC;;EAED;EACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxB,IAAIpE,KAAK,EAAEO,eAAe,CAAC,IAAI,CAAC;EAClC,CAAC;;EAED;EACA,MAAM8D,UAAU,GAAGC,OAAO,IAAI;IAC5B,MAAMC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IAClC,MAAMI,CAAC,GAAGJ,OAAO,GAAG,EAAE;IACtB,OAAO,GAAGC,CAAC,IAAIG,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EAChD,CAAC;;EAED;EACA,MAAMhC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI7B,YAAY,CAACO,OAAO,EAAE;IAC1B,IAAI,CAACtB,KAAK,EAAE,OAAO+B,KAAK,CAAC,kBAAkB,CAAC;IAE5C,MAAM8C,YAAY,GAAGrE,cAAc,IAAI,CAAC,IAAIJ,QAAQ,IAAI,CAAC,IAAIM,oBAAoB,IAAI,CAAC;IAEtF,IAAI,CAACmE,YAAY,EAAE;MACjB,MAAMC,aAAa,GAAGC,MAAM,CAACC,OAAO,CAClC,sCAAsC,GACtC,mBAAmBX,UAAU,CAACjE,QAAQ,CAAC,IAAI,GAC3C,uBAAuBF,OAAO,CAAC+E,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAK,IAAI,CAAC,CAAC1B,MAAM,IAAItD,OAAO,CAACsD,MAAM,MAAM,GACrF,kDACF,CAAC;MACD,IAAI,CAACsB,aAAa,EAAE;IACtB;IAEA/D,YAAY,CAACO,OAAO,GAAG,IAAI;IAE3B,IAAI;MACF,MAAM6D,QAAQ,GAAG,MAAMhC,KAAK,CAAC,uCAAuC,EAAE;QACpEiC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QACxD,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBC,MAAM,EAAEhG,IAAI,CAACiG,GAAG;UAChB/F,MAAM;UACNI,OAAO;UACP4F,WAAW,EAAEtF,cAAc;UAC3BE;QACF,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAACyE,QAAQ,CAACY,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,kBAAkBb,QAAQ,CAACc,MAAM,EAAE,CAAC;MACtE,MAAM7C,IAAI,GAAG,MAAM+B,QAAQ,CAAC9B,IAAI,CAAC,CAAC;MAElC,IAAID,IAAI,CAAC8C,YAAY,EAAE;QACrBlE,UAAU,CAAC,CAAC;QACZjC,QAAQ,CAAC,WAAWqD,IAAI,CAAC8C,YAAY,EAAE,CAAC;MAC1C,CAAC,MAAM;QACL,MAAM,IAAIF,KAAK,CAAC,2BAA2B,CAAC;MAC9C;IACF,CAAC,CAAC,OAAOpE,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,GAAG,CAAC;MACnCG,KAAK,CAAC,4CAA4C,CAAC;MACnDhB,YAAY,CAACO,OAAO,GAAG,KAAK;IAC9B;EACF,CAAC;;EAED;EACA,IAAIV,OAAO,EAAE,oBAAOpB,OAAA;IAAK2G,SAAS,EAAC,cAAc;IAAAC,QAAA,EAAC;EAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAEvE,oBACEhH,OAAA;IAAK2G,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxB5G,OAAA;MAAA4G,QAAA,EAAKpG,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEyG;IAAK;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eACvBhH,OAAA;MAAA4G,QAAA,GAAG,aAAW,EAAC/B,UAAU,CAACjE,QAAQ,CAAC;IAAA;MAAAiG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACxChH,OAAA;MAAA4G,QAAA,GAAG,gBAAc,EAAC5F,cAAc;IAAA;MAAA6F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACrChH,OAAA;MAAA4G,QAAA,GAAG,2BAAyB,EAAC1F,oBAAoB;IAAA;MAAA2F,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEtDhH,OAAA;MAAOkH,GAAG,EAAE5F,QAAS;MAAC6F,QAAQ;MAACC,KAAK;MAACC,KAAK,EAAC,KAAK;MAACC,MAAM,EAAC;IAAK;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAE/D,CAAClG,YAAY,gBACZd,OAAA;MAAQuH,OAAO,EAAE3C,WAAY;MAAAgC,QAAA,EAAC;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,gBAEjDhH,OAAA,CAAAE,SAAA;MAAA0G,QAAA,gBACE5G,OAAA;QAAK2G,SAAS,EAAC,WAAW;QAAAC,QAAA,EACvBpG,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEuD,SAAS,CAACyD,GAAG,CAAC,CAACC,CAAC,EAAEhD,KAAK,kBAC7BzE,OAAA;UAAiB2G,SAAS,EAAC,UAAU;UAAAC,QAAA,gBACnC5G,OAAA;YAAA4G,QAAA,GAAInC,KAAK,GAAG,CAAC,EAAC,IAAE,EAACgD,CAAC,CAACC,QAAQ;UAAA;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAC/BS,CAAC,CAACE,OAAO,CAACH,GAAG,CAAC,CAACI,GAAG,EAAEC,CAAC,kBACpB7H,OAAA;YAAA4G,QAAA,gBACE5G,OAAA;cACE8H,IAAI,EAAC,OAAO;cACZC,IAAI,EAAE,IAAItD,KAAK,EAAG;cAClBC,KAAK,EAAEkD,GAAI;cACXI,OAAO,EAAEtH,OAAO,CAAC+D,KAAK,CAAC,KAAKmD,GAAI;cAChCK,QAAQ,EAAEC,CAAC,IAAI1D,kBAAkB,CAACC,KAAK,EAAEyD,CAAC,CAACC,MAAM,CAACzD,KAAK;YAAE;cAAAmC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1D,CAAC,EACDY,GAAG;UAAA,GARMC,CAAC;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OASN,CACR,CAAC;QAAA,GAbMvC,KAAK;UAAAoC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAcV,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eACNhH,OAAA;QAAQuH,OAAO,EAAEnE,YAAa;QAAAwD,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA,eACnD,CACH;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC3G,EAAA,CA7NuBF,QAAQ;EAAA,QACXN,SAAS,EACXD,WAAW;AAAA;AAAAwI,EAAA,GAFNjI,QAAQ;AAAA,IAAAiI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}