{"ast":null,"code":"var _jsxFileName = \"C:\\\\Online Exam Proctoring System\\\\frontend\\\\src\\\\components\\\\ExamPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { endpoints } from \"../api\";\nimport * as faceapi from \"face-api.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ExamPage({\n  exam\n}) {\n  _s();\n  var _exam$questions;\n  const [answers, setAnswers] = useState([]);\n  const [multipleFaces, setMultipleFaces] = useState(false);\n  const token = localStorage.getItem(\"token\");\n  useEffect(() => {\n    const handleVisibility = () => {\n      if (document.hidden) alert(\"Tab switching detected!\");\n    };\n    document.addEventListener(\"visibilitychange\", handleVisibility);\n    return () => document.removeEventListener(\"visibilitychange\", handleVisibility);\n  }, []);\n  useEffect(() => {\n    const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\n    faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);\n    const interval = setInterval(checkMultipleFaces, 4000);\n    return () => clearInterval(interval);\n  }, []);\n  const checkMultipleFaces = async () => {\n    const video = document.querySelector(\"video\");\n    const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions());\n    if (detections.length > 1) {\n      setMultipleFaces(true);\n      alert(\"⚠️ Multiple faces detected!\");\n    }\n  };\n  const handleSubmit = async () => {\n    try {\n      const res = await fetch(endpoints.submitExam, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          examId: exam._id,\n          answers\n        })\n      });\n      const data = await res.json();\n      if (res.ok) alert(\"Exam submitted successfully!\");else alert(data.message || \"Error submitting exam!\");\n    } catch (err) {\n      console.error(\"Submit error:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"exam-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: exam.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), (_exam$questions = exam.questions) === null || _exam$questions === void 0 ? void 0 : _exam$questions.map((q, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: q.question\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: answers[i] || \"\",\n        onChange: e => {\n          const newAns = [...answers];\n          newAns[i] = e.target.value;\n          setAnswers(newAns);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      children: \"Submit Exam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      autoPlay: true,\n      muted: true,\n      width: \"300\",\n      height: \"200\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(ExamPage, \"ckqr4A9NlfFl3B1cgFq6z+CKgsI=\");\n_c = ExamPage;\nexport default ExamPage;\nvar _c;\n$RefreshReg$(_c, \"ExamPage\");","map":{"version":3,"names":["React","useEffect","useState","endpoints","faceapi","jsxDEV","_jsxDEV","ExamPage","exam","_s","_exam$questions","answers","setAnswers","multipleFaces","setMultipleFaces","token","localStorage","getItem","handleVisibility","document","hidden","alert","addEventListener","removeEventListener","MODEL_URL","process","env","PUBLIC_URL","nets","tinyFaceDetector","loadFromUri","interval","setInterval","checkMultipleFaces","clearInterval","video","querySelector","detections","detectAllFaces","TinyFaceDetectorOptions","length","handleSubmit","res","fetch","submitExam","method","headers","Authorization","body","JSON","stringify","examId","_id","data","json","ok","message","err","console","error","className","children","title","fileName","_jsxFileName","lineNumber","columnNumber","questions","map","q","i","question","type","value","onChange","e","newAns","target","onClick","autoPlay","muted","width","height","_c","$RefreshReg$"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/ExamPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { endpoints } from \"../api\";\r\nimport * as faceapi from \"face-api.js\";\r\n\r\nfunction ExamPage({ exam }) {\r\n  const [answers, setAnswers] = useState([]);\r\n  const [multipleFaces, setMultipleFaces] = useState(false);\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  useEffect(() => {\r\n    const handleVisibility = () => {\r\n      if (document.hidden) alert(\"Tab switching detected!\");\r\n    };\r\n    document.addEventListener(\"visibilitychange\", handleVisibility);\r\n    return () => document.removeEventListener(\"visibilitychange\", handleVisibility);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const MODEL_URL = process.env.PUBLIC_URL + \"/models\";\r\n    faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);\r\n    const interval = setInterval(checkMultipleFaces, 4000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const checkMultipleFaces = async () => {\r\n    const video = document.querySelector(\"video\");\r\n    const detections = await faceapi.detectAllFaces(\r\n      video,\r\n      new faceapi.TinyFaceDetectorOptions()\r\n    );\r\n    if (detections.length > 1) {\r\n      setMultipleFaces(true);\r\n      alert(\"⚠️ Multiple faces detected!\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      const res = await fetch(endpoints.submitExam, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ examId: exam._id, answers }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) alert(\"Exam submitted successfully!\");\r\n      else alert(data.message || \"Error submitting exam!\");\r\n    } catch (err) {\r\n      console.error(\"Submit error:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"exam-page\">\r\n      <h2>{exam.title}</h2>\r\n      {exam.questions?.map((q, i) => (\r\n        <div key={i}>\r\n          <p>{q.question}</p>\r\n          <input\r\n            type=\"text\"\r\n            value={answers[i] || \"\"}\r\n            onChange={(e) => {\r\n              const newAns = [...answers];\r\n              newAns[i] = e.target.value;\r\n              setAnswers(newAns);\r\n            }}\r\n          />\r\n        </div>\r\n      ))}\r\n      <button onClick={handleSubmit}>Submit Exam</button>\r\n      <video autoPlay muted width=\"300\" height=\"200\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ExamPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}