{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{authApi}from\"../api\";import\"./RegisterPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RegisterPage(){const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[role,setRole]=useState(\"student\");const[adminSecretKey,setAdminSecretKey]=useState(\"\");const[message,setMessage]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const navigate=useNavigate();const handleRegister=async e=>{e.preventDefault();setLoading(true);setMessage(\"\");setError(\"\");// Validation\nif(!name.trim()){setError(\"Name is required\");setLoading(false);return;}if(password.length<6){setError(\"Password must be at least 6 characters\");setLoading(false);return;}if(password!==confirmPassword){setError(\"Passwords do not match\");setLoading(false);return;}if(role===\"admin\"&&!adminSecretKey.trim()){setError(\"Admin secret key is required for admin registration\");setLoading(false);return;}try{const payload={name,email,password,role};if(role===\"admin\"){payload.adminSecretKey=adminSecretKey;}const res=await authApi.register(payload);setMessage(res.data.message||\"Registration successful!\");setTimeout(()=>{navigate(\"/\");},2000);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Registration failed\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"register-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-box\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register-header\",children:\"\\uD83D\\uDCDD Create Account\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleRegister,children:[/*#__PURE__*/_jsx(\"input\",{className:\"register-input\",type:\"text\",placeholder:\"Full Name\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"register-input\",type:\"email\",placeholder:\"Email Address\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"register-input\",type:\"password\",placeholder:\"Password (min 6 characters)\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{className:\"register-input\",type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"select\",{className:\"register-input\",value:role,onChange:e=>setRole(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"student\",children:\"\\uD83D\\uDC68\\u200D\\uD83C\\uDF93 Student\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC Admin\"})]}),role===\"admin\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-key-section\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"register-input\",type:\"password\",placeholder:\"\\uD83D\\uDD11 Admin Secret Key\",value:adminSecretKey,onChange:e=>setAdminSecretKey(e.target.value),required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"helper-text\",children:\"\\u26A0\\uFE0F Admin secret key is required to create an admin account\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"register-error\",children:error}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"register-success\",children:message}),/*#__PURE__*/_jsx(\"button\",{className:\"register-btn\",disabled:loading,children:loading?\"Registering...\":\"Register\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"register-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account?\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),className:\"link-button\",children:\"Login here\"})]})})]})});}","map":{"version":3,"names":["React","useState","useNavigate","authApi","jsx","_jsx","jsxs","_jsxs","RegisterPage","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","role","setRole","adminSecretKey","setAdminSecretKey","message","setMessage","loading","setLoading","error","setError","navigate","handleRegister","e","preventDefault","trim","length","payload","res","register","data","setTimeout","err","_err$response","_err$response$data","response","className","children","onSubmit","type","placeholder","value","onChange","target","required","disabled","onClick"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/RegisterPage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { authApi } from \"../api\";\r\nimport \"./RegisterPage.css\";\r\n\r\nexport default function RegisterPage() {\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [role, setRole] = useState(\"student\");\r\n  const [adminSecretKey, setAdminSecretKey] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    setError(\"\");\r\n\r\n    // Validation\r\n    if (!name.trim()) {\r\n      setError(\"Name is required\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      setError(\"Password must be at least 6 characters\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      setError(\"Passwords do not match\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (role === \"admin\" && !adminSecretKey.trim()) {\r\n      setError(\"Admin secret key is required for admin registration\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = { \r\n        name, \r\n        email, \r\n        password, \r\n        role \r\n      };\r\n\r\n      if (role === \"admin\") {\r\n        payload.adminSecretKey = adminSecretKey;\r\n      }\r\n\r\n      const res = await authApi.register(payload);\r\n      setMessage(res.data.message || \"Registration successful!\");\r\n      \r\n      setTimeout(() => {\r\n        navigate(\"/\");\r\n      }, 2000);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || \"Registration failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"register-container\">\r\n      <div className=\"register-box\">\r\n        <h2 className=\"register-header\">üìù Create Account</h2>\r\n        \r\n        <form className=\"register-form\" onSubmit={handleRegister}>\r\n          <input\r\n            className=\"register-input\"\r\n            type=\"text\"\r\n            placeholder=\"Full Name\"\r\n            value={name}\r\n            onChange={e => setName(e.target.value)}\r\n            required\r\n          />\r\n          \r\n          <input\r\n            className=\"register-input\"\r\n            type=\"email\"\r\n            placeholder=\"Email Address\"\r\n            value={email}\r\n            onChange={e => setEmail(e.target.value)}\r\n            required\r\n          />\r\n          \r\n          <input\r\n            className=\"register-input\"\r\n            type=\"password\"\r\n            placeholder=\"Password (min 6 characters)\"\r\n            value={password}\r\n            onChange={e => setPassword(e.target.value)}\r\n            required\r\n          />\r\n\r\n          <input\r\n            className=\"register-input\"\r\n            type=\"password\"\r\n            placeholder=\"Confirm Password\"\r\n            value={confirmPassword}\r\n            onChange={e => setConfirmPassword(e.target.value)}\r\n            required\r\n          />\r\n\r\n          <select\r\n            className=\"register-input\"\r\n            value={role}\r\n            onChange={e => setRole(e.target.value)}\r\n          >\r\n            <option value=\"student\">üë®‚Äçüéì Student</option>\r\n            <option value=\"admin\">üë®‚Äçüíº Admin</option>\r\n          </select>\r\n\r\n          {role === \"admin\" && (\r\n            <div className=\"admin-key-section\">\r\n              <input\r\n                className=\"register-input\"\r\n                type=\"password\"\r\n                placeholder=\"üîë Admin Secret Key\"\r\n                value={adminSecretKey}\r\n                onChange={e => setAdminSecretKey(e.target.value)}\r\n                required\r\n              />\r\n              <p className=\"helper-text\">\r\n                ‚ö†Ô∏è Admin secret key is required to create an admin account\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {error && <div className=\"register-error\">{error}</div>}\r\n          {message && <div className=\"register-success\">{message}</div>}\r\n\r\n          <button className=\"register-btn\" disabled={loading}>\r\n            {loading ? \"Registering...\" : \"Register\"}\r\n          </button>\r\n        </form>\r\n\r\n        <div className=\"register-footer\">\r\n          <p>\r\n            Already have an account? \r\n            <button \r\n              onClick={() => navigate(\"/\")}\r\n              className=\"link-button\"\r\n            >\r\n              Login here\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}