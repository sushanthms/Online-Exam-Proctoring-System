{"ast":null,"code":"// frontend/src/components/ResultPage.js - ENHANCED VERSION\nimport React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import ThemeToggle from\"./ThemeToggle\";import\"./ResultPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResultPage(_ref){var _examSession$autoSubm,_result$user;let{onLogout,isAdmin=false}=_ref;const{submissionId}=useParams();const[result,setResult]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[activeTab,setActiveTab]=useState(\"answers\");// answers, proctoring, timeline\nconst navigate=useNavigate();const handleGoToDashboard=()=>{const userData=JSON.parse(localStorage.getItem(\"user\"));if((userData===null||userData===void 0?void 0:userData.role)===\"student\")navigate(\"/student/dashboard\");else if((userData===null||userData===void 0?void 0:userData.role)===\"admin\")navigate(\"/admin/dashboard\");else navigate(\"/\");};const handleLogoutAndGoHome=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");if(onLogout)onLogout();alert(\"‚úÖ You have been logged out successfully!\");navigate(\"/\");window.location.reload();};useEffect(()=>{const fetchResult=async()=>{try{const token=localStorage.getItem(\"token\");if(!token){setError(\"No authentication token found. Please login.\");setLoading(false);return;}const response=await fetch(\"http://localhost:4000/api/exam/result/\".concat(submissionId),{headers:{Authorization:\"Bearer \".concat(token)}});if(!response.ok)throw new Error(\"Failed to fetch result: \".concat(response.status));const data=await response.json();console.log(\"üìä Result data:\",data);setResult(data);setLoading(false);}catch(error){console.error(\"Error fetching result:\",error);setError(error.message);setLoading(false);}};fetchResult();},[submissionId]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Loading your results...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-error\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u274C Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogoutAndGoHome,className:\"result-btn result-btn-primary\",children:\"Go to Login\"})]});}if(!result){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-error\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No result found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogoutAndGoHome,className:\"result-btn result-btn-primary\",children:\"Go to Login\"})]});}const percentage=(result.score/result.totalQuestions*100).toFixed(1);const isPassed=percentage>=60;// Extract proctoring data\nconst tabSwitches=result.tabSwitches||[];const identityVerifications=result.identityVerifications||[];const multipleFaceLogs=result.multipleFaceLogs||[];const warnings=result.warnings||[];const examSession=result.examSession||{};const proctoringSummary=result.proctoringSummary||{};// Format duration\nconst formatDuration=seconds=>{if(seconds===null||seconds===undefined||seconds===0)return\"0m 0s\";const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins,\"m \").concat(secs,\"s\");};// Create timeline from all events\nconst createTimeline=()=>{const events=[];// Add exam start\nif(examSession.startedAt){events.push({time:new Date(examSession.startedAt),timeInExam:\"00:00\",type:\"start\",icon:\"üöÄ\",title:\"Exam Started\",description:\"Student began taking the exam\",severity:\"info\"});}// Add tab switches\ntabSwitches.forEach(ts=>{events.push({time:new Date(ts.timestamp),timeInExam:ts.timeInExam,type:\"tab_switch\",icon:\"üîÑ\",title:\"Tab Switch Detected\",description:ts.warningMessage||\"Student switched browser tabs\",severity:\"warning\"});});// Add identity verifications (only failures and warnings)\nidentityVerifications.forEach(iv=>{if(iv.status==='failed'||iv.status==='no_face'){events.push({time:new Date(iv.timestamp),timeInExam:iv.timeInExam,type:\"identity\",icon:iv.status==='failed'?\"‚ùå\":\"‚ö†Ô∏è\",title:iv.status==='failed'?\"Identity Verification Failed\":\"Face Not Detected\",description:iv.details||\"Match: \".concat(iv.confidence,\"%\"),severity:iv.status==='failed'?\"error\":\"warning\"});}});// Add multiple face detections\nmultipleFaceLogs.forEach(mf=>{events.push({time:new Date(mf.timestamp),timeInExam:mf.timeInExam,type:\"multiple_faces\",icon:\"üë•\",title:\"Multiple Faces Detected\",description:\"\".concat(mf.facesDetected,\" people detected (Duration: \").concat(mf.duration,\"s)\"),severity:\"warning\"});});// Add warnings\nwarnings.forEach(w=>{events.push({time:new Date(w.timestamp),timeInExam:w.timeInExam,type:\"warning\",icon:\"‚ö†Ô∏è\",title:w.type.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase()),description:w.message,severity:w.severity});});// Add exam submission\nif(examSession.submittedAt){events.push({time:new Date(examSession.submittedAt),timeInExam:formatDuration(examSession.duration),type:\"submit\",icon:examSession.autoSubmitted?\"‚ö°\":\"‚úÖ\",title:examSession.autoSubmitted?\"Auto-Submitted\":\"Manually Submitted\",description:examSession.autoSubmitReason?\"Reason: \".concat(examSession.autoSubmitReason.replace(/_/g,' ')):\"Student submitted the exam\",severity:examSession.autoSubmitted?\"warning\":\"success\"});}// Sort by time\nreturn events.sort((a,b)=>a.time-b.time);};const timeline=createTimeline();return/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"theme-toggle-container\",children:/*#__PURE__*/_jsx(ThemeToggle,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCA Exam Results & Proctoring Report\"}),isAdmin&&/*#__PURE__*/_jsx(\"span\",{className:\"admin-badge\",children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC Admin View\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-score-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-score-display\",children:[result.score,\"/\",result.totalQuestions]}),/*#__PURE__*/_jsx(\"div\",{className:\"result-score-detail\",children:\"Questions Answered Correctly\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-percentage\",children:[percentage,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"result-pass-badge \".concat(isPassed?\"passed\":\"failed\"),children:isPassed?\"‚úÖ Passed\":\"‚ùå Failed\"}),examSession.autoSubmitted&&/*#__PURE__*/_jsxs(\"div\",{className:\"auto-submit-notice\",children:[\"\\u26A1 Auto-submitted: \",(_examSession$autoSubm=examSession.autoSubmitReason)===null||_examSession$autoSubm===void 0?void 0:_examSession$autoSubm.replace(/_/g,' ')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"exam-session-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCDD Exam Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"session-info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-icon\",children:\"\\uD83C\\uDFEB\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-label\",children:\"Exam\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-value\",children:result.examTitle||result.examId})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-icon\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-label\",children:\"Student\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-value\",children:result.username||result.studentName||((_result$user=result.user)===null||_result$user===void 0?void 0:_result$user.name)||\"Student\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-icon\",children:\"\\u23F1\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-label\",children:\"Duration\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-value\",children:formatDuration(examSession.duration)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-icon\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"info-label\",children:\"Submitted\"}),/*#__PURE__*/_jsx(\"div\",{className:\"info-value\",children:examSession.submittedAt?new Date(examSession.submittedAt).toLocaleString():\"N/A\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-summary-stats\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Proctoring Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-icon\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:tabSwitches.length}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Tab Switches\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-icon\",children:\"\\u274C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:identityVerifications.filter(iv=>iv.status==='failed').length}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Identity Failures\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-icon\",children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:multipleFaceLogs.length}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Multiple Face Events\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-value\",children:warnings.length}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Total Warnings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-value\",children:[Math.round(identityVerifications.filter(iv=>iv.status==='verified').length/Math.max(1,identityVerifications.length)*100),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-label\",children:\"Verification Rate\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"result-tab \".concat(activeTab===\"answers\"?\"active\":\"\"),onClick:()=>setActiveTab(\"answers\"),children:\"\\uD83D\\uDCDD Answers Review\"}),/*#__PURE__*/_jsx(\"button\",{className:\"result-tab \".concat(activeTab===\"proctoring\"?\"active\":\"\"),onClick:()=>setActiveTab(\"proctoring\"),children:\"\\uD83D\\uDD12 Proctoring Details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"result-tab \".concat(activeTab===\"timeline\"?\"active\":\"\"),onClick:()=>setActiveTab(\"timeline\"),children:\"\\uD83D\\uDCC5 Event Timeline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-tab-content\",children:[activeTab===\"answers\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"result-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCDD Question Review\"}),result.questions.map((q,i)=>{const userAnswerValue=result.answers&&result.answers[i]!==undefined?result.answers[i]:null;const correctValue=result.correctAnswers&&result.correctAnswers[i]?result.correctAnswers[i]:q.correctOptionValue||(typeof q.correctOption===\"number\"?q.options[q.correctOption]:null);const isCorrect=String(userAnswerValue||\"\").trim()===String(correctValue||\"\").trim();return/*#__PURE__*/_jsxs(\"div\",{className:\"result-question-item \".concat(isCorrect?\"correct\":\"incorrect\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-question-number\",children:[\"Question \",i+1]}),/*#__PURE__*/_jsx(\"div\",{className:\"result-question-text\",children:q.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-answer-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-answer-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-answer-label\",children:\"Your Answer:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-answer-value \".concat(isCorrect?\"correct-answer\":\"wrong-answer\"),children:userAnswerValue||\"Not Answered\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-answer-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"result-answer-label\",children:\"Correct Answer:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"result-answer-value correct-answer\",children:correctValue||\"Not Available\"})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"result-status-icon\",children:isCorrect?\"‚úÖ\":\"‚ùå\"})]},i);})]}),activeTab===\"proctoring\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"result-section\",children:[tabSwitches.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-detail-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDD04 Tab Switches (\",tabSwitches.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"proctoring-events-list\",children:tabSwitches.map((ts,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-event-card warning\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"event-icon\",children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"span\",{className:\"event-time\",children:ts.timeInExam})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"event-timestamp\",children:new Date(ts.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{className:\"event-message\",children:ts.warningMessage})]})]},i))})]}),identityVerifications.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-detail-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDD10 Identity Verification Events (\",identityVerifications.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"proctoring-events-list\",children:identityVerifications.map((iv,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-event-card \".concat(iv.status==='verified'?'success':'error'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"event-icon\",children:iv.status==='verified'?'‚úÖ':iv.status==='failed'?'‚ùå':'‚ö†Ô∏è'}),/*#__PURE__*/_jsx(\"span\",{className:\"event-time\",children:iv.timeInExam}),/*#__PURE__*/_jsxs(\"span\",{className:\"event-badge\",children:[iv.confidence,\"% match\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"event-timestamp\",children:new Date(iv.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{className:\"event-message\",children:iv.details}),iv.matchScore&&/*#__PURE__*/_jsxs(\"div\",{className:\"event-meta\",children:[\"Match Score: \",iv.matchScore]})]})]},i))})]}),multipleFaceLogs.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-detail-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDC65 Multiple Face Detections (\",multipleFaceLogs.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"proctoring-events-list\",children:multipleFaceLogs.map((mf,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-event-card warning\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"event-icon\",children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"span\",{className:\"event-time\",children:mf.timeInExam}),/*#__PURE__*/_jsxs(\"span\",{className:\"event-badge\",children:[mf.facesDetected,\" faces\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"event-timestamp\",children:new Date(mf.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{className:\"event-message\",children:mf.details}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-meta\",children:[\"Duration: \",mf.duration,\" seconds\"]})]})]},i))})]}),warnings.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-detail-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u26A0\\uFE0F All Warnings (\",warnings.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"proctoring-events-list\",children:warnings.map((w,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"proctoring-event-card \".concat(w.severity),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"event-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"event-time\",children:w.timeInExam}),/*#__PURE__*/_jsx(\"span\",{className:\"event-badge severity-\".concat(w.severity),children:w.severity})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"event-timestamp\",children:new Date(w.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{className:\"event-message\",children:w.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-meta\",children:[\"Type: \",w.type.replace(/_/g,' ')]})]})]},i))})]}),tabSwitches.length===0&&identityVerifications.filter(iv=>iv.status!=='verified').length===0&&multipleFaceLogs.length===0&&warnings.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-violations\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"no-violations-icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Perfect Exam Session!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No proctoring violations detected during this exam.\"})]})]}),activeTab===\"timeline\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"result-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCC5 Complete Event Timeline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-container\",children:timeline.map((event,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-event \".concat(event.severity),children:[/*#__PURE__*/_jsx(\"div\",{className:\"timeline-marker\",children:/*#__PURE__*/_jsx(\"span\",{className:\"timeline-icon\",children:event.icon})}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"timeline-title\",children:event.title}),/*#__PURE__*/_jsx(\"span\",{className:\"timeline-time\",children:event.timeInExam})]}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-description\",children:event.description}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline-timestamp\",children:event.time.toLocaleString()})]})]},i))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleGoToDashboard,className:\"result-btn result-btn-secondary\",children:\"\\uD83C\\uDFE0 Return to Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogoutAndGoHome,className:\"result-btn result-btn-primary\",children:\"\\uD83D\\uDD13 Logout & Return to Login\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","ThemeToggle","jsx","_jsx","jsxs","_jsxs","ResultPage","_ref","_examSession$autoSubm","_result$user","onLogout","isAdmin","submissionId","result","setResult","loading","setLoading","error","setError","activeTab","setActiveTab","navigate","handleGoToDashboard","userData","JSON","parse","localStorage","getItem","role","handleLogoutAndGoHome","removeItem","alert","window","location","reload","fetchResult","token","response","fetch","concat","headers","Authorization","ok","Error","status","data","json","console","log","message","className","children","onClick","percentage","score","totalQuestions","toFixed","isPassed","tabSwitches","identityVerifications","multipleFaceLogs","warnings","examSession","proctoringSummary","formatDuration","seconds","undefined","mins","Math","floor","secs","createTimeline","events","startedAt","push","time","Date","timeInExam","type","icon","title","description","severity","forEach","ts","timestamp","warningMessage","iv","details","confidence","mf","facesDetected","duration","w","replace","l","toUpperCase","submittedAt","autoSubmitted","autoSubmitReason","sort","a","b","timeline","examTitle","examId","username","studentName","user","name","toLocaleString","length","filter","round","max","questions","map","q","i","userAnswerValue","answers","correctValue","correctAnswers","correctOptionValue","correctOption","options","isCorrect","String","trim","text","matchScore","event"],"sources":["C:/Online Exam Proctoring System/frontend/src/components/ResultPage.js"],"sourcesContent":["// frontend/src/components/ResultPage.js - ENHANCED VERSION\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport ThemeToggle from \"./ThemeToggle\";\r\nimport \"./ResultPage.css\";\r\n\r\nexport default function ResultPage({ onLogout, isAdmin = false }) {\r\n  const { submissionId } = useParams();\r\n  const [result, setResult] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [activeTab, setActiveTab] = useState(\"answers\"); // answers, proctoring, timeline\r\n  const navigate = useNavigate();\r\n\r\n  const handleGoToDashboard = () => {\r\n    const userData = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (userData?.role === \"student\") navigate(\"/student/dashboard\");\r\n    else if (userData?.role === \"admin\") navigate(\"/admin/dashboard\");\r\n    else navigate(\"/\");\r\n  };\r\n\r\n  const handleLogoutAndGoHome = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n    if (onLogout) onLogout();\r\n    alert(\"‚úÖ You have been logged out successfully!\");\r\n    navigate(\"/\");\r\n    window.location.reload();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchResult = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n          setError(\"No authentication token found. Please login.\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        const response = await fetch(\r\n          `http://localhost:4000/api/exam/result/${submissionId}`,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n\r\n        if (!response.ok) throw new Error(`Failed to fetch result: ${response.status}`);\r\n        const data = await response.json();\r\n        \r\n        console.log(\"üìä Result data:\", data);\r\n        setResult(data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching result:\", error);\r\n        setError(error.message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchResult();\r\n  }, [submissionId]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"result-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <h3>Loading your results...</h3>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"result-error\">\r\n        <h3>‚ùå Error</h3>\r\n        <p>{error}</p>\r\n        <button onClick={handleLogoutAndGoHome} className=\"result-btn result-btn-primary\">\r\n          Go to Login\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!result) {\r\n    return (\r\n      <div className=\"result-error\">\r\n        <h3>No result found</h3>\r\n        <button onClick={handleLogoutAndGoHome} className=\"result-btn result-btn-primary\">\r\n          Go to Login\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const percentage = ((result.score / result.totalQuestions) * 100).toFixed(1);\r\n  const isPassed = percentage >= 60;\r\n\r\n  // Extract proctoring data\r\n  const tabSwitches = result.tabSwitches || [];\r\n  const identityVerifications = result.identityVerifications || [];\r\n  const multipleFaceLogs = result.multipleFaceLogs || [];\r\n  const warnings = result.warnings || [];\r\n  const examSession = result.examSession || {};\r\n  const proctoringSummary = result.proctoringSummary || {};\r\n\r\n  // Format duration\r\n  const formatDuration = (seconds) => {\r\n    if (seconds === null || seconds === undefined || seconds === 0) return \"0m 0s\";\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}m ${secs}s`;\r\n  };\r\n\r\n  // Create timeline from all events\r\n  const createTimeline = () => {\r\n    const events = [];\r\n\r\n    // Add exam start\r\n    if (examSession.startedAt) {\r\n      events.push({\r\n        time: new Date(examSession.startedAt),\r\n        timeInExam: \"00:00\",\r\n        type: \"start\",\r\n        icon: \"üöÄ\",\r\n        title: \"Exam Started\",\r\n        description: \"Student began taking the exam\",\r\n        severity: \"info\"\r\n      });\r\n    }\r\n\r\n    // Add tab switches\r\n    tabSwitches.forEach(ts => {\r\n      events.push({\r\n        time: new Date(ts.timestamp),\r\n        timeInExam: ts.timeInExam,\r\n        type: \"tab_switch\",\r\n        icon: \"üîÑ\",\r\n        title: \"Tab Switch Detected\",\r\n        description: ts.warningMessage || \"Student switched browser tabs\",\r\n        severity: \"warning\"\r\n      });\r\n    });\r\n\r\n    // Add identity verifications (only failures and warnings)\r\n    identityVerifications.forEach(iv => {\r\n      if (iv.status === 'failed' || iv.status === 'no_face') {\r\n        events.push({\r\n          time: new Date(iv.timestamp),\r\n          timeInExam: iv.timeInExam,\r\n          type: \"identity\",\r\n          icon: iv.status === 'failed' ? \"‚ùå\" : \"‚ö†Ô∏è\",\r\n          title: iv.status === 'failed' ? \"Identity Verification Failed\" : \"Face Not Detected\",\r\n          description: iv.details || `Match: ${iv.confidence}%`,\r\n          severity: iv.status === 'failed' ? \"error\" : \"warning\"\r\n        });\r\n      }\r\n    });\r\n\r\n    // Add multiple face detections\r\n    multipleFaceLogs.forEach(mf => {\r\n      events.push({\r\n        time: new Date(mf.timestamp),\r\n        timeInExam: mf.timeInExam,\r\n        type: \"multiple_faces\",\r\n        icon: \"üë•\",\r\n        title: \"Multiple Faces Detected\",\r\n        description: `${mf.facesDetected} people detected (Duration: ${mf.duration}s)`,\r\n        severity: \"warning\"\r\n      });\r\n    });\r\n\r\n    // Add warnings\r\n    warnings.forEach(w => {\r\n      events.push({\r\n        time: new Date(w.timestamp),\r\n        timeInExam: w.timeInExam,\r\n        type: \"warning\",\r\n        icon: \"‚ö†Ô∏è\",\r\n        title: w.type.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\r\n        description: w.message,\r\n        severity: w.severity\r\n      });\r\n    });\r\n\r\n    // Add exam submission\r\n    if (examSession.submittedAt) {\r\n      events.push({\r\n        time: new Date(examSession.submittedAt),\r\n        timeInExam: formatDuration(examSession.duration),\r\n        type: \"submit\",\r\n        icon: examSession.autoSubmitted ? \"‚ö°\" : \"‚úÖ\",\r\n        title: examSession.autoSubmitted ? \"Auto-Submitted\" : \"Manually Submitted\",\r\n        description: examSession.autoSubmitReason \r\n          ? `Reason: ${examSession.autoSubmitReason.replace(/_/g, ' ')}`\r\n          : \"Student submitted the exam\",\r\n        severity: examSession.autoSubmitted ? \"warning\" : \"success\"\r\n      });\r\n    }\r\n\r\n    // Sort by time\r\n    return events.sort((a, b) => a.time - b.time);\r\n  };\r\n\r\n  const timeline = createTimeline();\r\n\r\n  return (\r\n    <div className=\"result-container\">\r\n      <div className=\"theme-toggle-container\">\r\n        <ThemeToggle />\r\n      </div>\r\n      <div className=\"result-header\">\r\n        <h2>üìä Exam Results & Proctoring Report</h2>\r\n        {isAdmin && (\r\n          <span className=\"admin-badge\">üë®‚Äçüíº Admin View</span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Score Card */}\r\n      <div className=\"result-score-card\">\r\n        <div className=\"result-score-display\">\r\n          {result.score}/{result.totalQuestions}\r\n        </div>\r\n        <div className=\"result-score-detail\">Questions Answered Correctly</div>\r\n        <div className=\"result-percentage\">{percentage}%</div>\r\n        <div className={`result-pass-badge ${isPassed ? \"passed\" : \"failed\"}`}>\r\n          {isPassed ? \"‚úÖ Passed\" : \"‚ùå Failed\"}\r\n        </div>\r\n        \r\n        {examSession.autoSubmitted && (\r\n          <div className=\"auto-submit-notice\">\r\n            ‚ö° Auto-submitted: {examSession.autoSubmitReason?.replace(/_/g, ' ')}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Exam Session Info */}\r\n      <div className=\"exam-session-info\">\r\n        <h3>üìù Exam Details</h3>\r\n        <div className=\"session-info-grid\">\r\n          <div className=\"info-item\">\r\n            <span className=\"info-icon\">üè´</span>\r\n            <div>\r\n              <div className=\"info-label\">Exam</div>\r\n              <div className=\"info-value\">{result.examTitle || result.examId}</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <span className=\"info-icon\">üë§</span>\r\n            <div>\r\n              <div className=\"info-label\">Student</div>\r\n              <div className=\"info-value\">{result.username || result.studentName || result.user?.name || \"Student\"}</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <span className=\"info-icon\">‚è±Ô∏è</span>\r\n            <div>\r\n              <div className=\"info-label\">Duration</div>\r\n              <div className=\"info-value\">{formatDuration(examSession.duration)}</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"info-item\">\r\n            <span className=\"info-icon\">üìÖ</span>\r\n            <div>\r\n              <div className=\"info-label\">Submitted</div>\r\n              <div className=\"info-value\">\r\n                {examSession.submittedAt ? new Date(examSession.submittedAt).toLocaleString() : \"N/A\"}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Proctoring Summary Stats */}\r\n      <div className=\"proctoring-summary-stats\">\r\n        <h3>üìä Proctoring Summary</h3>\r\n        <div className=\"summary-grid\">\r\n          <div className=\"summary-card\">\r\n            <div className=\"summary-icon\">üîÑ</div>\r\n            <div className=\"summary-value\">{tabSwitches.length}</div>\r\n            <div className=\"summary-label\">Tab Switches</div>\r\n          </div>\r\n          <div className=\"summary-card\">\r\n            <div className=\"summary-icon\">‚ùå</div>\r\n            <div className=\"summary-value\">{identityVerifications.filter(iv => iv.status === 'failed').length}</div>\r\n            <div className=\"summary-label\">Identity Failures</div>\r\n          </div>\r\n          <div className=\"summary-card\">\r\n            <div className=\"summary-icon\">üë•</div>\r\n            <div className=\"summary-value\">{multipleFaceLogs.length}</div>\r\n            <div className=\"summary-label\">Multiple Face Events</div>\r\n          </div>\r\n          <div className=\"summary-card\">\r\n            <div className=\"summary-icon\">‚ö†Ô∏è</div>\r\n            <div className=\"summary-value\">{warnings.length}</div>\r\n            <div className=\"summary-label\">Total Warnings</div>\r\n          </div>\r\n          <div className=\"summary-card\">\r\n            <div className=\"summary-icon\">‚úÖ</div>\r\n            <div className=\"summary-value\">{Math.round((identityVerifications.filter(iv => iv.status === 'verified').length / Math.max(1, identityVerifications.length)) * 100)}%</div>\r\n            <div className=\"summary-label\">Verification Rate</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabbed Content */}\r\n      <div className=\"result-tabs\">\r\n        <button \r\n          className={`result-tab ${activeTab === \"answers\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"answers\")}\r\n        >\r\n          üìù Answers Review\r\n        </button>\r\n        <button \r\n          className={`result-tab ${activeTab === \"proctoring\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"proctoring\")}\r\n        >\r\n          üîí Proctoring Details\r\n        </button>\r\n        <button \r\n          className={`result-tab ${activeTab === \"timeline\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"timeline\")}\r\n        >\r\n          üìÖ Event Timeline\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"result-tab-content\">\r\n        {/* Answers Tab */}\r\n        {activeTab === \"answers\" && (\r\n          <div className=\"result-section\">\r\n            <h3>üìù Question Review</h3>\r\n            {result.questions.map((q, i) => {\r\n              const userAnswerValue = result.answers && result.answers[i] !== undefined ? result.answers[i] : null;\r\n              const correctValue = result.correctAnswers && result.correctAnswers[i] \r\n                ? result.correctAnswers[i] \r\n                : (q.correctOptionValue || (typeof q.correctOption === \"number\" ? q.options[q.correctOption] : null));\r\n\r\n              const isCorrect = String(userAnswerValue || \"\").trim() === String(correctValue || \"\").trim();\r\n\r\n              return (\r\n                <div\r\n                  key={i}\r\n                  className={`result-question-item ${isCorrect ? \"correct\" : \"incorrect\"}`}\r\n                >\r\n                  <div className=\"result-question-number\">Question {i + 1}</div>\r\n                  <div className=\"result-question-text\">{q.text}</div>\r\n\r\n                  <div className=\"result-answer-row\">\r\n                    <div className=\"result-answer-item\">\r\n                      <span className=\"result-answer-label\">Your Answer:</span>\r\n                      <span className={`result-answer-value ${isCorrect ? \"correct-answer\" : \"wrong-answer\"}`}>\r\n                        {userAnswerValue || \"Not Answered\"}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"result-answer-item\">\r\n                      <span className=\"result-answer-label\">Correct Answer:</span>\r\n                      <span className=\"result-answer-value correct-answer\">\r\n                        {correctValue || \"Not Available\"}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <span className=\"result-status-icon\">{isCorrect ? \"‚úÖ\" : \"‚ùå\"}</span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {/* Proctoring Details Tab */}\r\n        {activeTab === \"proctoring\" && (\r\n          <div className=\"result-section\">\r\n            {/* Tab Switches */}\r\n            {tabSwitches.length > 0 && (\r\n              <div className=\"proctoring-detail-section\">\r\n                <h4>üîÑ Tab Switches ({tabSwitches.length})</h4>\r\n                <div className=\"proctoring-events-list\">\r\n                  {tabSwitches.map((ts, i) => (\r\n                    <div key={i} className=\"proctoring-event-card warning\">\r\n                      <div className=\"event-header\">\r\n                        <span className=\"event-icon\">üîÑ</span>\r\n                        <span className=\"event-time\">{ts.timeInExam}</span>\r\n                      </div>\r\n                      <div className=\"event-details\">\r\n                        <div className=\"event-timestamp\">\r\n                          {new Date(ts.timestamp).toLocaleString()}\r\n                        </div>\r\n                        <div className=\"event-message\">{ts.warningMessage}</div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Identity Verifications */}\r\n            {identityVerifications.length > 0 && (\r\n              <div className=\"proctoring-detail-section\">\r\n                <h4>üîê Identity Verification Events ({identityVerifications.length})</h4>\r\n                <div className=\"proctoring-events-list\">\r\n                  {identityVerifications.map((iv, i) => (\r\n                    <div key={i} className={`proctoring-event-card ${iv.status === 'verified' ? 'success' : 'error'}`}>\r\n                      <div className=\"event-header\">\r\n                        <span className=\"event-icon\">\r\n                          {iv.status === 'verified' ? '‚úÖ' : iv.status === 'failed' ? '‚ùå' : '‚ö†Ô∏è'}\r\n                        </span>\r\n                        <span className=\"event-time\">{iv.timeInExam}</span>\r\n                        <span className=\"event-badge\">{iv.confidence}% match</span>\r\n                      </div>\r\n                      <div className=\"event-details\">\r\n                        <div className=\"event-timestamp\">\r\n                          {new Date(iv.timestamp).toLocaleString()}\r\n                        </div>\r\n                        <div className=\"event-message\">{iv.details}</div>\r\n                        {iv.matchScore && (\r\n                          <div className=\"event-meta\">Match Score: {iv.matchScore}</div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Multiple Face Detections */}\r\n            {multipleFaceLogs.length > 0 && (\r\n              <div className=\"proctoring-detail-section\">\r\n                <h4>üë• Multiple Face Detections ({multipleFaceLogs.length})</h4>\r\n                <div className=\"proctoring-events-list\">\r\n                  {multipleFaceLogs.map((mf, i) => (\r\n                    <div key={i} className=\"proctoring-event-card warning\">\r\n                      <div className=\"event-header\">\r\n                        <span className=\"event-icon\">üë•</span>\r\n                        <span className=\"event-time\">{mf.timeInExam}</span>\r\n                        <span className=\"event-badge\">{mf.facesDetected} faces</span>\r\n                      </div>\r\n                      <div className=\"event-details\">\r\n                        <div className=\"event-timestamp\">\r\n                          {new Date(mf.timestamp).toLocaleString()}\r\n                        </div>\r\n                        <div className=\"event-message\">{mf.details}</div>\r\n                        <div className=\"event-meta\">Duration: {mf.duration} seconds</div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Warnings */}\r\n            {warnings.length > 0 && (\r\n              <div className=\"proctoring-detail-section\">\r\n                <h4>‚ö†Ô∏è All Warnings ({warnings.length})</h4>\r\n                <div className=\"proctoring-events-list\">\r\n                  {warnings.map((w, i) => (\r\n                    <div key={i} className={`proctoring-event-card ${w.severity}`}>\r\n                      <div className=\"event-header\">\r\n                        <span className=\"event-icon\">‚ö†Ô∏è</span>\r\n                        <span className=\"event-time\">{w.timeInExam}</span>\r\n                        <span className={`event-badge severity-${w.severity}`}>{w.severity}</span>\r\n                      </div>\r\n                      <div className=\"event-details\">\r\n                        <div className=\"event-timestamp\">\r\n                          {new Date(w.timestamp).toLocaleString()}\r\n                        </div>\r\n                        <div className=\"event-message\">{w.message}</div>\r\n                        <div className=\"event-meta\">Type: {w.type.replace(/_/g, ' ')}</div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* No Violations */}\r\n            {tabSwitches.length === 0 && \r\n             identityVerifications.filter(iv => iv.status !== 'verified').length === 0 && \r\n             multipleFaceLogs.length === 0 && \r\n             warnings.length === 0 && (\r\n              <div className=\"no-violations\">\r\n                <div className=\"no-violations-icon\">‚úÖ</div>\r\n                <h3>Perfect Exam Session!</h3>\r\n                <p>No proctoring violations detected during this exam.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Timeline Tab */}\r\n        {activeTab === \"timeline\" && (\r\n          <div className=\"result-section\">\r\n            <h3>üìÖ Complete Event Timeline</h3>\r\n            <div className=\"timeline-container\">\r\n              {timeline.map((event, i) => (\r\n                <div key={i} className={`timeline-event ${event.severity}`}>\r\n                  <div className=\"timeline-marker\">\r\n                    <span className=\"timeline-icon\">{event.icon}</span>\r\n                  </div>\r\n                  <div className=\"timeline-content\">\r\n                    <div className=\"timeline-header\">\r\n                      <span className=\"timeline-title\">{event.title}</span>\r\n                      <span className=\"timeline-time\">{event.timeInExam}</span>\r\n                    </div>\r\n                    <div className=\"timeline-description\">{event.description}</div>\r\n                    <div className=\"timeline-timestamp\">\r\n                      {event.time.toLocaleString()}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"result-actions\">\r\n        <button\r\n          onClick={handleGoToDashboard}\r\n          className=\"result-btn result-btn-secondary\"\r\n        >\r\n          üè† Return to Dashboard\r\n        </button>\r\n\r\n        <button\r\n          onClick={handleLogoutAndGoHome}\r\n          className=\"result-btn result-btn-primary\"\r\n        >\r\n          üîì Logout & Return to Login\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}